(self["webpackChunkmicro_mall"]=self["webpackChunkmicro_mall"]||[]).push([[454],{7504:function(e,t,a){"use strict";a.d(t,{Z:function(){return c}});var s=function(){var e=this,t=e._self._c;return t("div",[t("el-dialog",{attrs:{title:e.title,visible:e.visible,width:e.width},on:{"update:visible":function(t){e.visible=t},close:e.visibleClose}},[t("div",{staticClass:"order-detail"},[t("div",{staticClass:"detail-top"},[e.showCard.one?t("el-card",{staticClass:"detail-one",style:e.cradWidthHeight},[e._t("one")],2):e._e(),e.showCard.two?t("el-card",{style:e.cradWidthHeight},[e._t("two")],2):e._e()],1),e.showCard.three?t("el-card",{staticClass:"crad-margin"},[e._t("three")],2):e._e(),e.showCard.four?t("el-card",[e._t("four")],2):e._e(),e._t("extra")],2)])],1)},r=[],l={name:"MinorDialog",data(){return{visible:!1}},props:{title:{type:String,default:"提示"},visibleFlag:{type:Boolean,default:!1},width:{type:String,default:"60%"},cradWidthHeight:{type:String,default:"width: 395px; height: 240px"},showCard:{one:!0,two:!0,three:!0,four:!0}},created(){},methods:{visibleClose(){this.$emit("update:visibleFlag",!1),this.$emit("clearActivities",[]),this.$emit("clearConsumerInfo",[])}},watch:{visibleFlag(){this.visible=this.visibleFlag}}},i=l,o=a(1001),n=(0,o.Z)(i,s,r,!1,null,"73e13787",null),c=n.exports},579:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return h}});var s=function(){var e=this,t=e._self._c;return t("div",[t("el-card",[t("div",{staticClass:"order-top"},[t("div",[t("el-select",{attrs:{placeholder:"请选择",size:"small"},on:{change:e.getType},model:{value:e.customerQuery.value,callback:function(t){e.$set(e.customerQuery,"value",t)},expression:"customerQuery.value"}},e._l(e.options,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),t("el-input",{attrs:{placeholder:"请输入搜索关键词",size:"small",clearable:""},on:{clear:e.getCustomerList},model:{value:e.customerQuery.query,callback:function(t){e.$set(e.customerQuery,"query",t)},expression:"customerQuery.query"}}),t("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:e.getCustomerList}},[e._v("搜索")])],1),t("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.showAddCustomer}},[e._v("添加客户")])],1),t("el-table",{attrs:{data:e.customerList},on:{select:e.getSele}},[t("el-table-column",{attrs:{type:"selection"}}),t("el-table-column",{attrs:{prop:"customerName",label:"客户名称"}}),t("el-table-column",{attrs:{label:"成为客户时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("transformTime")(t.row.becomeTime))+" ")]}}])}),t("el-table-column",{attrs:{label:"最近消费时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("transformTime")(t.row.consumeTime))+" ")]}}])}),t("el-table-column",{attrs:{prop:"customerBalance",label:"客户余额"}}),t("el-table-column",{attrs:{prop:"consumeNum",label:"消费次数"}}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{staticClass:"button-w",attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.showCustomerDialog(a.row)}}},[e._v("详情")]),t("el-popconfirm",{attrs:{"confirm-button-text":"确认","cancel-button-text":"取消",icon:"el-icon-info","icon-color":"red",title:"确定删除该客户吗？"},on:{confirm:function(t){return e.removeCustomer(a.row)}}},[t("el-button",{attrs:{slot:"reference",type:"danger",size:"mini"},slot:"reference"},[e._v("删除")])],1)]}}])})],1),t("el-pagination",{attrs:{background:"","current-page":e.customerQuery.pagenum,"page-sizes":[10,20,30,40,60],"page-size":e.customerQuery.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),t("MinorDialog",{attrs:{visibleFlag:e.add.visibleFlagAdd,title:e.add.title,width:e.add.width,cradWidthHeight:e.add.cradWidthHeight,showCard:e.add.showCard},on:{"update:visibleFlag":function(t){return e.$set(e.add,"visibleFlagAdd",t)},"update:visible-flag":function(t){return e.$set(e.add,"visibleFlagAdd",t)}}},[t("el-form",{ref:"ruleFormCustomer",staticClass:"add-form",attrs:{slot:"four",model:e.addQuery,"label-width":"84px",size:"mini",rules:e.rules},slot:"four"},[t("el-form-item",{attrs:{label:"姓名:",prop:"customerName"}},[t("el-input",{model:{value:e.addQuery.customerName,callback:function(t){e.$set(e.addQuery,"customerName",t)},expression:"addQuery.customerName"}})],1),t("el-form-item",{attrs:{label:"手机号:",prop:"mobile"}},[t("el-input",{model:{value:e.addQuery.mobile,callback:function(t){e.$set(e.addQuery,"mobile",t)},expression:"addQuery.mobile"}})],1),t("el-form-item",{attrs:{label:"客户来源:",prop:"channel"}},[t("el-select",{attrs:{placeholder:"请选择客户来源"},model:{value:e.addQuery.channel,callback:function(t){e.$set(e.addQuery,"channel",t)},expression:"addQuery.channel"}},[t("el-option",{attrs:{label:"小红书",value:"小红书"}}),t("el-option",{attrs:{label:"微信",value:"微信"}}),t("el-option",{attrs:{label:"H5",value:"H5"}})],1)],1),t("el-form-item",{attrs:{label:"生日",prop:"birthday"}},[t("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间","value-format":"timestamp"},model:{value:e.addQuery.birthday,callback:function(t){e.$set(e.addQuery,"birthday",t)},expression:"addQuery.birthday"}})],1),t("div",{staticClass:"add-button"},[t("el-button",{attrs:{size:"small"},on:{click:e.closeDialog}},[e._v("取消")]),t("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.AddCustomer}},[e._v("确认")])],1)],1)],1),t("MinorDialog",{attrs:{visibleFlag:e.details.visibleFlag,title:e.details.title,width:e.details.width,cradWidthHeight:e.details.cradWidthHeight,showCard:e.details.showCard},on:{"update:visibleFlag":function(t){return e.$set(e.details,"visibleFlag",t)},"update:visible-flag":function(t){return e.$set(e.details,"visibleFlag",t)},clearConsumerInfo:e.clearConsumerInfo}},[t("div",{staticClass:"details-top",attrs:{slot:"three"},slot:"three"},[t("el-image",{attrs:{src:e.url}}),t("el-row",[t("el-col",{attrs:{span:8}},[e._v("昵称: "+e._s(e.customerDetails.customerName))]),t("el-col",{attrs:{span:8}},[e._v("客户编号:"+e._s(e.customerDetails.customerId))]),t("el-col",{attrs:{span:8}},[e._v("成为客户时间: "+e._s(e._f("transformTime")(e.customerDetails.becomeTime)))]),t("el-col",{attrs:{span:8}},[e._v("客户渠道: "+e._s(e.customerDetails.channel))]),t("el-col",{staticClass:"add-tag",attrs:{span:24}},[e.tagInputVisible?t("el-input",{ref:"tagInput",attrs:{size:"mini"},on:{blur:e.handleInputConfirm},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(e=>e.target.blur()).apply(null,arguments)}},model:{value:e.tagInputValue,callback:function(t){e.tagInputValue=t},expression:"tagInputValue"}}):t("el-button",{attrs:{size:"mini"},on:{click:e.showTagInput}},[e._v("打标签")])],1)],1)],1),t("div",{staticClass:"details-tags",attrs:{slot:"four"},slot:"four"},[t("span",[e._v("标签: ")]),e._l(e.tags,(function(a,s){return t("el-tag",{key:s,attrs:{closable:"",size:"mini",effect:"plain"},on:{close:function(t){return e.removeTag(a)}}},[e._v(" "+e._s(a)+" ")])}))],2)])],1)},r=[],l=a(7504),i=a(7157),o=a(4806),n=a.n(o),c=a(9432),d={components:{MinorDialog:l.Z},data(){return{add:{visibleFlagAdd:!1,title:"添加客户",width:"460px",cradWidthHeight:"width: 100%;",showCard:{one:!1,two:!1,three:!1,four:!0}},details:{visibleFlag:!1,title:"客户详情",width:"70%",cradWidthHeight:"width: 100%;",showCard:{one:!1,two:!1,three:!0,four:!0}},options:[{value:"mobile",label:"手机号"},{value:"customerName",label:"客户名"}],customerQuery:{query:"",pagenum:1,pagesize:10,value:"mobile"},customerList:[],total:0,addQuery:{customerName:"",mobile:"",birthday:"",channel:"",becomeTime:""},rules:{customerName:[{required:!0,message:"请输入客户姓名",trigger:"blur"}],mobile:[{required:!0,message:"请输入客户手机号",trigger:"blur"},{min:11,max:11,message:"请输入11位手机号",trigger:"blur"}],channel:[{required:!0,message:"请选择客户来源",trigger:"change"}],birthday:[{type:"date",required:!0,message:"请选择客户生日",trigger:"blur"}]},url:"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erS60B294sfRw7UGn7GKSnYkmUDhjO2BkVWrwDlicbpqgdwibC5DrSYLjechT03FzYC9cDBwiarDcQaw/132",customerDetails:[],tags:[],tagInputVisible:!1,tagInputValue:""}},created(){this.getCustomerList()},methods:{closeDialog(){this.add.visibleFlagAdd=!1,this.$refs.ruleFormCustomer.resetFields()},showDialog(){this.visibleFlag=!0},getType(e){this.customerQuery.value=e},async getCustomerList(){const{data:e}=await this.$axios.get(`${i.Z.localUrl}/customerlist`,{params:this.customerQuery});if(200!==e.status)return this.$message.error("请求失败,请刷新重试");this.customerList=e.data,this.total=e.total},showCustomerDialog(e){this.details.visibleFlag=!0,this.customerDetails=e,e.tag?this.tags=e.tag.split(","):this.tags=[]},handleSizeChange(e){this.customerQuery.pagesize=e,this.getCustomerList()},handleCurrentChange(e){this.customerQuery.pagenum=e,this.getCustomerList()},getSele(e){},showAddCustomer(){this.add.visibleFlagAdd=!0},AddCustomer(){this.$refs.ruleFormCustomer.validate((async e=>{if(!e)return this.$message.error("请完善表单内容");let t=(new Date).getTime();this.addQuery.becomeTime=t.toString().slice(0,10);const{data:a}=await this.$axios.post(`${i.Z.localUrl}/customerlist`,this.addQuery);if(200!==a.status)return this.$message.error("添加失败");const s="客户列表",r=`添加了客户"${this.addQuery.customerName}"`;(0,c.R)(s,r),this.$message.success("添加成功"),this.add.visibleFlagAdd=!1,this.getCustomerList(),this.$refs.ruleFormCustomer.resetFields()}))},async removeCustomer(e){const{data:t}=await this.$axios.delete(`${i.Z.localUrl}/customerlist/${e.customerId}`);if(200!==t.status)return this.$message.error("删除失败");const a="客户列表",s=`删除了客户"${e.customerName}"`;(0,c.R)(a,s),this.getCustomerList()},clearConsumerInfo(e){this.customerDetails=e,this.tags=e,this.getCustomerList()},showTagInput(){this.tagInputVisible=!0,this.$nextTick((()=>{this.$refs.tagInput.focus()}))},async handleInputConfirm(){if(this.tagInputVisible=!1,""===this.tagInputValue||null===this.tagInputValue)return;let e=n().cloneDeep(this.tags);""===e&&null===e&&(e=[]),e.push(this.tagInputValue),e=e.toString();const{data:t}=await this.$axios.put(`${i.Z.localUrl}/customerlist/${this.customerDetails.customerId}`,{tag:e});if(200!==t.status)return this.$message.error("添加tag失败，请重试");this.tags.push(this.tagInputValue),this.tagInputValue=""},async removeTag(e){let t=this.tags.filter((t=>t!==e));t=t.toString();const{data:a}=await this.$axios.put(`${i.Z.localUrl}/customerlist/${this.customerDetails.customerId}`,{tag:t});if(200!==a.status)return this.$message.error("删除tag失败，请重试");this.tags=t.split(",")}}},u=d,m=a(1001),p=(0,m.Z)(u,s,r,!1,null,"56bc8ff4",null),h=p.exports},7895:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return c}});var s=function(){var e=this,t=e._self._c;return t("div",[t("el-card",[t("span",[e._v("时间筛选:")]),t("el-date-picker",{attrs:{type:"datetimerange","picker-options":e.pickerOptions,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right",size:"mini"},on:{change:e.selectTime},model:{value:e.datePickerValue,callback:function(t){e.datePickerValue=t},expression:"datePickerValue"}})],1),t("el-card",[t("span",{staticClass:"blue_vertical"}),t("span",[e._v("整体数据")]),t("el-divider"),t("div",[t("el-row",e._l(e.overallData,(function(a){return t("el-col",{key:a.title,staticStyle:{padding:"20px 10px"},attrs:{span:4}},[t("div",{staticClass:"overall"},[t("p",[e._v(e._s(a.title))]),t("p",{staticClass:"num"},[e._v(e._s(a.num))]),t("p",[e._v("环比: "),t("i",{class:a.icon,style:"el-icon-caret-top"===a.icon?"color: #67c23a;":"color: #ed1515;"})])])])})),1)],1)],1),t("el-card",[t("span",{staticClass:"blue_vertical"}),t("span",[e._v("趋势分析")]),t("el-divider"),t("div",{ref:"trendChart",staticClass:"trend_chart"})],1),t("el-card",[t("span",{staticClass:"blue_vertical"}),t("span",[e._v("客户")]),t("el-divider"),t("div",[t("el-row",e._l(e.clientData,(function(a){return t("el-col",{key:a.title,staticStyle:{padding:"20px 10px"},attrs:{span:12}},[t("div",{staticClass:"overall"},[t("p",[e._v(e._s(a.title))]),t("p",{staticClass:"num"},[e._v(e._s(a.num))]),t("p",[e._v("环比: "),t("i",{class:a.icon,style:"el-icon-caret-top"===a.icon?"color: #67c23a;":"color: #ed1515;"})])])])})),1)],1),t("div",{staticClass:"client"},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:12}},[t("p",[e._v("支付会员人数分布")]),t("div",{ref:"clientChart1",staticClass:"client_chart"})]),t("el-col",{attrs:{span:12}},[t("p",[e._v("支付方式分布")]),t("div",{ref:"clientChart2",staticClass:"client_chart"})]),t("el-col",{attrs:{span:12}},[t("p",[e._v("支付新老人数分布")]),t("div",{ref:"clientChart3",staticClass:"client_chart"})]),t("el-col",{attrs:{span:12}},[t("p",[e._v("支付新老应收金额分布")]),t("div",{ref:"clientChart4",staticClass:"client_chart"})])],1)],1)],1)],1)},r=[],l={data(){return{datePickerValue:"",pickerOptions:{shortcuts:[{text:"最近一周",onClick(e){const t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick(e){const t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick(e){const t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},overallData:[{title:"实收金额",num:3200,icon:"el-icon-caret-top"},{title:"浏览量",num:40,icon:"el-icon-caret-top"},{title:"访客量",num:24,icon:"el-icon-caret-bottom"},{title:"访问支付转化率",num:"120%",icon:"el-icon-caret-top"},{title:"客单价",num:200,icon:"el-icon-caret-bottom"},{title:"支付单数",num:60,icon:"el-icon-caret-top"},{title:"支付人数",num:23,icon:"el-icon-caret-top"},{title:"新客支付",num:1200,icon:"el-icon-caret-bottom"},{title:"老客支付",num:2e3,icon:"el-icon-caret-top"},{title:"新增客户",num:20,icon:"el-icon-caret-top"},{title:"新客成交数",num:3,icon:"el-icon-caret-bottom"},{title:"老客成交数",num:12,icon:"el-icon-caret-top"}],trendData:["2022-06-01","2022-06-02","2022-06-03","2022-06-04","2022-06-05","2022-06-06","2022-06-07","2022-06-08"],trendNumData:[600,400,320,600,1230,2160,1150,2e3],trendEchart:{},clientEchartOne:{},clientEchartTwo:{},clientEchartThree:{},clientEchartFour:{},clientData:[{title:"新增客户数",num:32,icon:"el-icon-caret-top"},{title:"新增会员数",num:5,icon:"el-icon-caret-top"}]}},methods:{showTend(){this.trendEchart=this.$echarts.init(this.$refs.trendChart);const e=["#3388ff"];this.trendEchart.setOption({tooltip:{trigger:"axis",axisPointer:{type:"cross",lineStyle:{width:1,type:"solid"}}},color:e,grid:{left:"5%",right:"5%",top:"14%",bottom:"10%"},xAxis:{type:"category",data:this.trendData,boundaryGap:!1},yAxis:{type:"value",splitLine:{show:!0,lineStyle:{type:"dashed"}}},series:[{data:this.trendNumData,name:"实收金额",type:"line",smooth:!0,showSymbol:!1,lineStyle:{color:"#4aa9e5"},areaStyle:{color:new this.$echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(51, 136, 255,0.8)"},{offset:1,color:"rgba(51, 136, 255,0.3)"}])}}]})},selectTime(e){console.log(e)},showClient(){this.clientEchartOne=this.$echarts.init(this.$refs.clientChart1),this.clientEchartOne.setOption({tooltip:{trigger:"item"},legend:{right:"2%",bottom:"2%",orient:"vertical",textStyle:{color:"#8a93a7"}},series:[{name:"支付会员数",type:"pie",radius:["60%","90%"],avoidLabelOverlap:!1,label:{show:!0,position:"outside",color:"#8a93a7"},labelLine:{show:!0,length:12,length2:15,smooth:.5},data:[{value:10,name:"支付会员数"},{value:15,name:"支付非会员数"}]}]}),this.clientEchartTwo=this.$echarts.init(this.$refs.clientChart2),this.clientEchartTwo.setOption({tooltip:{trigger:"item"},legend:{right:"2%",bottom:"2%",orient:"vertical",textStyle:{color:"#8a93a7"}},series:[{name:"支付方式分布",type:"pie",radius:["60%","90%"],avoidLabelOverlap:!1,label:{show:!0,position:"outside",color:"#8a93a7"},labelLine:{show:!0,length:12,length2:15,smooth:.5},data:[{value:1012,name:"支付宝"},{value:1523,name:"微信"},{value:659,name:"现金"}]}]}),this.clientEchartThree=this.$echarts.init(this.$refs.clientChart3),this.clientEchartThree.setOption({tooltip:{trigger:"item"},legend:{right:"2%",bottom:"2%",orient:"vertical",textStyle:{color:"#8a93a7"}},series:[{name:"支付新老人数",type:"pie",radius:["60%","90%"],avoidLabelOverlap:!1,label:{show:!0,position:"outside",color:"#8a93a7"},labelLine:{show:!0,length:12,length2:15,smooth:.5},data:[{value:23,name:"复购客户数"},{value:12,name:"首购客户数"}]}]}),this.clientEchartFour=this.$echarts.init(this.$refs.clientChart4),this.clientEchartFour.setOption({tooltip:{trigger:"item"},legend:{right:"2%",bottom:"2%",orient:"vertical",textStyle:{color:"#8a93a7"}},series:[{name:"支付新老应收金额",type:"pie",radius:["60%","90%"],avoidLabelOverlap:!1,label:{show:!0,position:"outside",color:"#8a93a7"},labelLine:{show:!0,length:12,length2:15,smooth:.5},data:[{value:2300,name:"复购应收金额"},{value:1523,name:"首购应收金额"}]}]})}},mounted(){this.showTend(),this.showClient(),window.addEventListener("resize",(()=>{this.trendEchart.resize(),this.clientEchartOne.resize(),this.clientEchartTwo.resize(),this.clientEchartThree.resize(),this.clientEchartFour.resize()}))}},i=l,o=a(1001),n=(0,o.Z)(i,s,r,!1,null,"16d3467e",null),c=n.exports},6251:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return d}});var s=function(){var e=this,t=e._self._c;return t("div",[t("el-card",{staticClass:"goods"},[t("div",{staticClass:"goods-top"},[t("el-input",{attrs:{placeholder:"请输入内容",size:"small",clearable:""},on:{clear:e.getGoodsList},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getGoodsList},slot:"append"})],1),t("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.showAddGoods}},[e._v("添加商品")])],1),t("el-table",{ref:"goodslist",attrs:{data:e.goodsList.slice((e.currentPage-1)*e.pageSize,e.currentPage*e.pageSize),stripe:""}},[t("el-table-column",{attrs:{type:"selection",width:"55"}}),t("el-table-column",{attrs:{label:"商品名称",prop:"goodsName"}}),t("el-table-column",{attrs:{label:"标签",prop:"tag"}}),t("el-table-column",{attrs:{label:"价格",prop:"price",width:"60"}}),t("el-table-column",{attrs:{label:"销量",prop:"salesNum"}}),t("el-table-column",{attrs:{label:"上下架时间",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("transformTime")(t.row.putAwayDate))+" ")]}}])}),t("el-table-column",{attrs:{label:"剩余库存",prop:"stock"}}),t("el-table-column",{attrs:{label:"操作"}},[t("el-button",{attrs:{type:"primary",size:"mini"}},[e._v("编辑")])],1)],1),t("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),t("el-dialog",{attrs:{title:"添加商品",visible:e.addGoodsVisible,width:"36%"},on:{"update:visible":function(t){e.addGoodsVisible=t}}},[t("el-form",{staticClass:"goods-add",attrs:{model:e.goodsInfo}},[t("el-form-item",{attrs:{label:"商品名称"}},[t("el-input",{attrs:{size:"small"},model:{value:e.goodsInfo.goodsName,callback:function(t){e.$set(e.goodsInfo,"goodsName",t)},expression:"goodsInfo.goodsName"}})],1),t("el-form-item",{attrs:{label:"商品标签"}},[t("el-select",{attrs:{placeholder:"请选择标签",size:"small"},model:{value:e.goodsInfo.tag,callback:function(t){e.$set(e.goodsInfo,"tag",t)},expression:"goodsInfo.tag"}},[t("el-option",{attrs:{label:"食用油",value:"shiyongyou"}}),t("el-option",{attrs:{label:"面粉",value:"mianfen"}})],1)],1),t("el-form-item",{attrs:{label:"价格"}},[t("el-input",{attrs:{size:"small"},model:{value:e.goodsInfo.price,callback:function(t){e.$set(e.goodsInfo,"price",t)},expression:"goodsInfo.price"}})],1),t("el-form-item",{attrs:{label:"销量"}},[t("el-input",{attrs:{size:"small"},model:{value:e.goodsInfo.salesNum,callback:function(t){e.$set(e.goodsInfo,"salesNum",t)},expression:"goodsInfo.salesNum"}})],1),t("el-form-item",{attrs:{label:"库存"}},[t("el-input",{attrs:{size:"small"},model:{value:e.goodsInfo.stock,callback:function(t){e.$set(e.goodsInfo,"stock",t)},expression:"goodsInfo.stock"}})],1)],1),t("span",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.addGoodsVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addGoodsVisible=!1}}},[e._v("确 定")])],1)],1)],1)},r=[],l=a(7157),i={data(){return{goodsList:[],search:"",total:0,currentPage:1,pageSize:10,addGoodsVisible:!1,goodsInfo:{goodsName:"",tag:"",price:"",salesNum:"",stock:""}}},created(){this.getGoodsList()},methods:{async getGoodsList(){const e=await this.$axios.get(`${l.Z.defultUrl}/goods`);if(200!==e.data.meta.status)return this.$message.error("获取商品列表失败");this.goodsList=e.data.data,this.total=e.data.data.length},handleSizeChange(e){this.pageSize=e},handleCurrentChange(e){this.currentPage=e},showAddGoods(){this.addGoodsVisible=!0}}},o=i,n=a(1001),c=(0,n.Z)(o,s,r,!1,null,"7bb6ef0f",null),d=c.exports},6027:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return c}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"login"},[t("img",{attrs:{src:a(2072),alt:""}}),"login"===e.register?t("el-card",[t("el-row",{staticClass:"topcut"},[t("el-col",{attrs:{span:7},nativeOn:{click:function(t){return e.showPassword.apply(null,arguments)}}},[e._v("密码登录")]),t("el-col",{attrs:{span:1}},[e._v("|")]),t("el-col",{attrs:{span:16},nativeOn:{click:function(t){return e.showVerify.apply(null,arguments)}}},[e._v("验证码登录")])],1),"pass"===e.loginShow?t("el-form",{key:1,ref:"passRuleForm",attrs:{model:e.passForm,rules:e.passRules}},[t("el-form-item",{attrs:{label:"手机号码",prop:"mobile"}},[t("el-input",{attrs:{placeholder:"注册时填写的手机号"},model:{value:e.passForm.mobile,callback:function(t){e.$set(e.passForm,"mobile",t)},expression:"passForm.mobile"}})],1),t("el-form-item",{attrs:{label:"登录密码",prop:"password"}},[t("el-input",{attrs:{placeholder:"请输入密码"},model:{value:e.passForm.password,callback:function(t){e.$set(e.passForm,"password",t)},expression:"passForm.password"}})],1),t("el-row",{staticClass:"remember_forget"},[t("el-col",{staticClass:"left",attrs:{span:12}},[t("el-checkbox",{attrs:{label:"记住我"}})],1),t("el-col",{staticClass:"right",attrs:{span:12}},[t("el-link",{attrs:{underline:!1,target:"_blank"},on:{click:e.showReset}},[e._v("忘记密码？")])],1)],1),t("el-button",{attrs:{type:"primary"},on:{click:e.loginPassword}},[e._v("登录")])],1):"verify"===e.loginShow?t("el-form",{key:2,ref:"verifyRuleForm",attrs:{model:e.verifyForm,rules:e.verifyRules}},[t("el-form-item",{attrs:{label:"手机号码",prop:"vermobile"}},[t("el-input",{attrs:{placeholder:"注册时填写的手机号"},model:{value:e.verifyForm.vermobile,callback:function(t){e.$set(e.verifyForm,"vermobile",t)},expression:"verifyForm.vermobile"}})],1),t("el-form-item",{attrs:{label:"验证码",prop:"vercode"}},[t("el-input",{attrs:{placeholder:"请填写验证码"},model:{value:e.verifyForm.vercode,callback:function(t){e.$set(e.verifyForm,"vercode",t)},expression:"verifyForm.vercode"}}),t("a",{staticClass:"getcode",attrs:{href:""}},[e._v("获取验证码")])],1),t("el-row",{staticClass:"remember_forget"},[t("el-col",{staticClass:"left",attrs:{span:12}},[t("el-checkbox",{attrs:{label:"记住我"}})],1)],1),t("el-button",{attrs:{type:"primary"},on:{click:e.loginVerify}},[e._v("登录")])],1):e._e()],1):"reset"===e.register?t("el-card",[t("el-row",{staticClass:"topcut"},[t("el-col",{staticClass:"resetpass",attrs:{span:24}},[e._v("密码重置")])],1),t("el-form",{key:3,attrs:{model:e.resetPassword,rules:e.resetRules}},[t("el-form-item",{attrs:{label:"手机号码",prop:"resmobile"}},[t("el-input",{attrs:{placeholder:"注册时填写的手机号"},model:{value:e.resetPassword.resmobile,callback:function(t){e.$set(e.resetPassword,"resmobile",t)},expression:"resetPassword.resmobile"}})],1),t("el-form-item",{attrs:{label:"验证码",prop:"rescode"}},[t("el-input",{attrs:{placeholder:"请填写短信验证码"},model:{value:e.resetPassword.rescode,callback:function(t){e.$set(e.resetPassword,"rescode",t)},expression:"resetPassword.rescode"}}),t("a",{staticClass:"getcode",attrs:{href:""}},[e._v("获取验证码")])],1),t("el-form-item",{attrs:{label:"设置密码",prop:"respassword"}},[t("el-input",{attrs:{placeholder:"6-12位必须包含数字和字母"},model:{value:e.resetPassword.respassword,callback:function(t){e.$set(e.resetPassword,"respassword",t)},expression:"resetPassword.respassword"}})],1),t("el-row",[t("el-col",{staticClass:"left",attrs:{span:24}},[t("span",[e._v("已有账号")]),t("el-link",{attrs:{underline:!1,type:"primary",target:"_blank"},on:{click:e.showLogin}},[e._v("登录")])],1)],1),t("el-button",{attrs:{type:"primary"}},[e._v("确认修改")])],1)],1):e._e()],1)},r=[],l=(a(4806),{data(){return{resetPass:"reset",passForm:{mobile:"",password:""},verifyForm:{vermobile:"",vercode:""},resetPassword:{resmobile:"",rescode:"",respassword:""},loginShow:"pass",register:"login",passRules:{mobile:[{required:!0,message:"请输入手机号",trigger:"blur"},{min:11,max:11,message:"请输入11位手机号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:12,message:"请输入6 - 12位密码",trigger:"blur"}]},verifyRules:{vermobile:[{required:!0,message:"请输入手机号",trigger:"blur"},{min:11,max:11,message:"请输入11位手机号",trigger:"blur"}],vercode:[{required:!0,message:"请输入验证码",trigger:"blur"},{min:6,max:6,message:"请输入6位数字验证码",trigger:"blur"}]},resetRules:{resmobile:[{required:!0,message:"请输入手机号",trigger:"blur"},{min:11,max:11,message:"请输入11位手机号",trigger:"blur"}],rescode:[{required:!0,message:"请输入验证码",trigger:"blur"},{min:6,max:6,message:"请输入6位数字验证码",trigger:"blur"}],respassword:[{required:!0,message:"请输入需要设置的密码",trigger:"blur"},{min:6,max:12,message:"请输入6 - 12位密码,包含数字和字母",trigger:"blur"}]}}},methods:{showPassword(){console.log(this),this.loginShow="pass"},showVerify(){this.loginShow="verify"},showReset(){this.register="reset"},showLogin(){this.register="login"},loginPassword(){this.$refs.passRuleForm.validate((async e=>{if(!e)return this.$message.error("请填写完整内容");const{data:t}=await this.$axios.post("login");if(200!==t.meta.status)return this.$message.error("登录失败,请输入正确的手机号或密码");this.$message.success("登录成功"),this.$router.push("home")}))},loginVerify(){this.$refs.verifyRuleForm.validate((async e=>{if(!e)return this.$message.error("请填写完整内容");const{data:t}=await this.$axios.post("login-ver");if(200!==t.meta.status)return this.$message.error("登录失败,请输入正确的手机号或密码");this.$message.success("登录成功"),this.$router.push("home")}))}}}),i=l,o=a(1001),n=(0,o.Z)(i,s,r,!1,null,"5c7e94fa",null),c=n.exports},4077:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return m}});var s=function(){var e=this,t=e._self._c;return t("div",[t("el-card",[t("div",{staticClass:"order-top"},[t("el-select",{attrs:{placeholder:"请选择",size:"small"},on:{change:e.getType},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),t("el-input",{attrs:{placeholder:"请输入搜索关键词",size:"small",clearable:""},on:{clear:e.getOrderList},model:{value:e.orderQuery.query,callback:function(t){e.$set(e.orderQuery,"query",t)},expression:"orderQuery.query"}}),t("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:e.getOrderList}},[e._v("搜索")])],1),t("el-table",{attrs:{data:e.orderList}},[t("el-table-column",{attrs:{prop:"goodsName",label:"商品名称"}}),t("el-table-column",{attrs:{prop:"orderNum",label:"订单号",width:"240"}}),t("el-table-column",{attrs:{prop:"price",label:"售价"}}),t("el-table-column",{attrs:{prop:"count",label:"数量"}}),t("el-table-column",{attrs:{prop:"memberName",label:"客户姓名"}}),t("el-table-column",{attrs:{prop:"amount",label:"支付金额"}}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-link",{attrs:{type:"primary",underline:!1},on:{click:function(t){return e.showOrderDialog(a.row)}}},[e._v("详情")])]}}])})],1),t("el-pagination",{attrs:{background:"","current-page":e.orderQuery.pagenum,"page-sizes":[10,20,30,40,60],"page-size":e.orderQuery.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),t("MinorDialog",{attrs:{visibleFlag:e.visibleFlag,title:e.title,width:e.width,cradWidthHeight:e.cradWidthHeight,showCard:e.showCard},on:{"update:visibleFlag":function(t){e.visibleFlag=t},"update:visible-flag":function(t){e.visibleFlag=t},clearActivities:e.clearActivities,clearConsumerInfo:e.clearConsumerInfo}},[t("div",{staticClass:"left-align",attrs:{slot:"one"},slot:"one"},[t("p",{staticClass:"font-weight-500"},[e._v("订单信息")]),t("el-divider"),t("el-row",[t("el-col",{staticClass:"margintop-16",attrs:{span:24}},[t("span",[e._v("订单编号:")]),t("span",[e._v(e._s(e.orderDetails.orderNum))])]),t("el-col",{staticClass:"margintop-16",attrs:{span:24}},[t("span",[e._v("实付金额:")]),t("span",[e._v(e._s(e.orderDetails.amount))])]),t("el-col",{staticClass:"margintop-16",attrs:{span:24}},[t("span",[e._v("支付方式:")]),t("span",[e._v(e._s(e.orderDetails.Payment))])]),t("el-col",{staticClass:"margintop-16",attrs:{span:24}},[t("span",[e._v("买家备注:")]),t("span",[e._v(e._s(e.orderDetails.buyersNote))])]),t("el-col",{staticClass:"margintop-16",attrs:{span:24}},[t("span",[e._v("卖家备注:")]),t("span",[e._v(e._s(e.orderDetails.sellerNote))])])],1)],1),t("div",{staticClass:"left-align",attrs:{slot:"two"},slot:"two"},[t("p",{staticClass:"font-weight-500"},[e._v("订单状态: "+e._s(1===e.orderDetails.isPay?"已支付":"未支付"))]),t("el-divider"),t("el-timeline",e._l(e.activities,(function(a,s){return t("el-timeline-item",{key:s,attrs:{timestamp:a.timestamp,type:a.type}},[e._v(" "+e._s(a.content)+" ")])})),1)],1),t("div",{staticClass:"left-align",attrs:{slot:"three"},slot:"three"},[t("p",{staticClass:"font-weight-500"},[e._v("配送信息")]),t("el-divider"),t("el-row",[t("el-col",{staticClass:"margintop-16",attrs:{span:12}},[t("span",[e._v("收货地址:")]),t("span",[e._v(e._s(e.orderDetails.receiverAddress))])]),t("el-col",{staticClass:"padding-left-23 margintop-16",attrs:{span:12}},[t("span",[e._v("运费:")]),t("span",[e._v(e._s(e.orderDetails.freight))])]),t("el-col",{staticClass:"margintop-16",attrs:{span:12}},[t("span",[e._v("物流公司:")]),t("span",[e._v(e._s(e.orderDetails.logisticsCompany))])]),t("el-col",{staticClass:"padding-left-23 margintop-16",attrs:{span:12}},[t("span",[e._v("物流单号:")]),t("span",[e._v(e._s(e.orderDetails.logisticsSingle))])])],1)],1),t("div",{staticClass:"left-align",attrs:{slot:"four"},slot:"four"},[t("p",{staticClass:"font-weight-500"},[e._v("消费信息")]),t("el-divider"),t("el-table",{attrs:{data:e.consumerInfo}},[t("el-table-column",{attrs:{prop:"goodsName",label:"商品"}}),t("el-table-column",{attrs:{prop:"price",label:"单价"}}),t("el-table-column",{attrs:{prop:"count",label:"数量"}}),t("el-table-column",{attrs:{prop:"freight",label:"运费"}})],1),t("el-row",{staticClass:"consumer-Info"},[t("el-col",{staticClass:"margintop-16"},[t("span",[e._v("小计:")]),t("span",[e._v(e._s(e.orderDetails.amount))])]),t("el-col",{staticClass:"margintop-16"},[t("span",[e._v("运费:")]),t("span",[e._v(e._s(e.orderDetails.freight))])]),t("el-col",{staticClass:"margintop-16"},[t("span",[e._v(e._s(1===e.orderDetails.isPay?"付款: "+e.orderDetails.Payment:"待支付:"))]),t("span",[e._v(e._s(e.orderDetails.amount+e.orderDetails.freight))])]),t("el-col",{staticClass:"margintop-16"},[t("span",[e._v("合计收款:")]),t("span",[e._v(e._s(e.orderDetails.amount+e.orderDetails.freight))])])],1)],1)])],1)},r=[],l=a(7157),i=a(7504),o=a(886),n={components:{MinorDialog:i.Z},data(){return{orderQuery:{query:"",pagenum:1,pagesize:10,value:"goodsName"},orderList:[],options:[{value:"memberName",label:"客户姓名"},{value:"orderNum",label:"订单号"},{value:"goodsName",label:"商品名"}],value:"goodsName",total:0,visibleFlag:!1,title:"订单详情",width:"70%",cradWidthHeight:"width: 100%; height:260px",showCard:{one:!0,two:!0,three:!0,four:!0},orderDetails:[],activities:[],consumerInfo:[]}},created(){this.getOrderList()},methods:{async getOrderList(){const{data:e}=await this.$axios.get(`${l.Z.localUrl}/order`,{params:this.orderQuery});if(200!==e.status)return this.$message.error("获取订单列表失败，请刷新重试");this.orderList=e.data,this.total=e.total},handleSizeChange(e){this.orderQuery.pagesize=e,this.getOrderList()},handleCurrentChange(e){this.orderQuery.pagenum=e,this.getOrderList()},getType(e){this.orderQuery.value=e},showOrderDialog(e){this.visibleFlag=!0,this.orderDetails=e,this.consumerInfo.push(e),e.orderTime&&(e.payTime?this.activities.push({content:"下单时间",timestamp:(0,o.transformTime)(e.orderTime)},{content:"支付时间",timestamp:(0,o.transformTime)(e.payTime),type:"primary"}):this.activities.push({content:"下单时间",timestamp:(0,o.transformTime)(e.orderTime),type:"primary"}))},clearActivities(e){this.activities=e},clearConsumerInfo(e){this.consumerInfo=e}}},c=n,d=a(1001),u=(0,d.Z)(c,s,r,!1,null,"57c698c0",null),m=u.exports},4682:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return w}});var s=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"tab"},[t("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"账号管理",name:"first"}},[t("el-card",[t("div",{staticClass:"account-card"},[t("div",[t("el-button",{staticClass:"margin-r-10",attrs:{type:"primary",size:"mini"},on:{click:e.showAddAccount}},[e._v("添加账号")]),t("el-select",{attrs:{placeholder:"请选择",size:"mini"},model:{value:e.accountQuery.value,callback:function(t){e.$set(e.accountQuery,"value",t)},expression:"accountQuery.value"}},e._l(e.options,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("div",{staticClass:"right"},[t("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入搜索内容",size:"mini"},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}},[t("el-select",{attrs:{slot:"prepend",placeholder:"请选择",size:"mini"},slot:"prepend",model:{value:e.searchSelect,callback:function(t){e.searchSelect=t},expression:"searchSelect"}},[t("el-option",{attrs:{label:"手机号",value:"1"}}),t("el-option",{attrs:{label:"用户名",value:"2"}})],1),t("el-button",{attrs:{slot:"append",icon:"el-icon-search",size:"mini"},slot:"append"})],1)],1)]),t("div",[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.accountDate}},[t("el-table-column",{attrs:{prop:"username",label:"用户名",width:"180"}}),t("el-table-column",{attrs:{prop:"role",label:"角色",width:"180"}}),t("el-table-column",{attrs:{prop:"mobile",label:"手机号"}}),t("el-table-column",{attrs:{label:"性别"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tag",{attrs:{type:"男"===a.row.sex?"":"danger"}},[e._v(e._s(a.row.sex))])]}}])}),t("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"status"},[t("span",{staticClass:"status_circle",style:{"background-color":1===a.row.status?"#52c41a":"#c5c5c5"}}),t("span",[e._v(e._s(1===a.row.status?"开启":"关闭"))])])]}}])}),t("el-table-column",{attrs:{label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("transformTime")(t.row.createtime))+" ")]}}])}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.showAccountEdit(a.row)}}},[e._v("编辑")]),t("el-popconfirm",{attrs:{"confirm-button-text":"确认","cancel-button-text":"取消",icon:"el-icon-info","icon-color":"red",title:"确定删除该账号吗？不可恢复！！"},on:{confirm:function(t){return e.removeAccount(a.row)}}},[t("el-button",{attrs:{slot:"reference",type:"danger",size:"mini"},slot:"reference"},[e._v("删除")])],1)]}}])})],1)],1),t("div",{staticClass:"pagination"},[t("el-pagination",{attrs:{background:"","current-page":e.accountQuery.pagenum,"page-sizes":[10,20,30,40,60],"page-size":e.accountQuery.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])],1),t("el-tab-pane",{attrs:{label:"角色管理",name:"second"}},[t("el-card",[t("div",{staticClass:"add_role"},[t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.addRole}},[e._v("添加角色")])],1),t("div",[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.roleData}},[t("el-table-column",{attrs:{label:"角色名",prop:"rolename"}}),t("el-table-column",{attrs:{label:"使用账号数量",prop:"accRoleNum"}}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.showDrawer(a.row)}}},[e._v("编辑")]),t("el-popconfirm",{attrs:{"confirm-button-text":"确认","cancel-button-text":"取消",icon:"el-icon-info","icon-color":"red",title:"确定删除该角色吗？不可恢复！！"}},[t("el-button",{attrs:{slot:"reference",type:"danger",size:"mini"},slot:"reference"},[e._v("删除")])],1)]}}])})],1)],1)])],1)],1)],1),t("MinorDrawer",{attrs:{drawerFlagD:e.roleEditList.drawer,size:e.roleEditList.size,title:e.roleEditList.title},on:{"update:drawerFlagD":function(t){return e.$set(e.roleEditList,"drawer",t)},"update:drawer-flag-d":function(t){return e.$set(e.roleEditList,"drawer",t)}}},[t("div",{attrs:{slot:"contents"},slot:"contents"},[t("el-form",{ref:"roleForm",attrs:{model:e.rolePermission,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"角色名称"}},[t("el-input",{model:{value:e.rolePermission.roleName,callback:function(t){e.$set(e.rolePermission,"roleName",t)},expression:"rolePermission.roleName"}})],1),t("el-form-item",{attrs:{label:"添加权限"}},[t("el-tree",{ref:"roleRef",attrs:{data:e.rolePermissionList,props:e.roleProps,"node-key":"id","show-checkbox":""},on:{"check-change":e.handleCheckChange}})],1)],1)],1),t("div",{attrs:{slot:"button"},slot:"button"},[t("el-button",{attrs:{size:"mini"},on:{click:e.closeDrawer}},[e._v("取消")]),t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.commitRoleEdit}},[e._v("确定")])],1)]),t("MinorDrawer",{attrs:{drawerFlagD:e.addEditList.drawer,size:e.addEditList.size,title:e.addEditList.title},on:{"update:drawerFlagD":function(t){return e.$set(e.addEditList,"drawer",t)},"update:drawer-flag-d":function(t){return e.$set(e.addEditList,"drawer",t)}}},[t("div",{attrs:{slot:"contents"},slot:"contents"},[t("el-form",{ref:"roleForm",attrs:{model:e.addRolePermission,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"角色名称"}},[t("el-input",{model:{value:e.addRolePermission.roleName,callback:function(t){e.$set(e.addRolePermission,"roleName",t)},expression:"addRolePermission.roleName"}})],1),t("el-form-item",{attrs:{label:"添加权限"}},[t("el-tree",{ref:"addRoleRef",attrs:{data:e.rolePermissionList,props:e.roleProps,"node-key":"id","show-checkbox":""},on:{"check-change":e.addRoleChange}})],1)],1)],1),t("div",{attrs:{slot:"button"},slot:"button"},[t("el-button",{attrs:{size:"mini"},on:{click:e.closeDrawer}},[e._v("取消")]),t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.addRoles}},[e._v("确定")])],1)]),t("el-drawer",{attrs:{title:"账号编辑",visible:e.drawer,"before-close":e.drawerClose,size:"560px"},on:{"update:visible":function(t){e.drawer=t}}},[t("div",{staticClass:"editInfoHeader"},[t("el-avatar",{attrs:{shape:"square",size:64,src:e.editData.avatar_url}}),t("div",{staticClass:"userid"},[t("span",[e._v("用户 ID: "+e._s(e.editData.userid))]),t("span",[e._v("创建时间: "+e._s(e._f("transformTime")(e.editData.createtime)))])])],1),t("div",{staticClass:"editContent"},[t("el-form",{ref:"form",staticClass:"editForm",attrs:{model:e.editData,"label-width":"80px"}},[t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"用户名:"}},[t("el-input",{attrs:{size:"small"},model:{value:e.editData.username,callback:function(t){e.$set(e.editData,"username",t)},expression:"editData.username"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"手机号:"}},[t("el-input",{attrs:{size:"small"},model:{value:e.editData.mobile,callback:function(t){e.$set(e.editData,"mobile",t)},expression:"editData.mobile"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"性别:"}},[t("el-select",{attrs:{placeholder:"请选择性别",size:"small"},model:{value:e.editData.sex,callback:function(t){e.$set(e.editData,"sex",t)},expression:"editData.sex"}},[t("el-option",{attrs:{label:"男",value:"男"}}),t("el-option",{attrs:{label:"女",value:"女"}})],1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"状态:"}},[t("el-select",{attrs:{placeholder:"请选择状态",size:"small"},model:{value:e.editData.status,callback:function(t){e.$set(e.editData,"status",t)},expression:"editData.status"}},[t("el-option",{attrs:{label:"开启",value:"开启"}}),t("el-option",{attrs:{label:"禁用",value:"禁用"}})],1)],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"角色:"}},[t("el-select",{attrs:{placeholder:"请选择角色",size:"small"},model:{value:e.editData.role,callback:function(t){e.$set(e.editData,"role",t)},expression:"editData.role"}},e._l(e.roleData,(function(e){return t("el-option",{key:e.id,attrs:{label:e.rolename,value:e.rolename}})})),1)],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"个人简介:"}},[t("el-input",{attrs:{type:"textarea",rows:5,placeholder:"请输入内容"},model:{value:e.editData.introduction,callback:function(t){e.$set(e.editData,"introduction",t)},expression:"editData.introduction"}})],1)],1)],1)],1),t("div",{staticClass:"editButton"},[t("el-button",{attrs:{size:"small"},on:{click:e.closeEdit}},[e._v("取消")]),t("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.commitEdit}},[e._v("提交")])],1)],1)]),t("el-drawer",{attrs:{title:"添加账号",visible:e.addDrawer,"before-close":e.addDrawerClose,size:"560px"},on:{"update:visible":function(t){e.addDrawer=t}}},[t("div",{staticClass:"editContent",staticStyle:{"margin-top":"14px"}},[t("el-form",{ref:"form",staticClass:"editForm",attrs:{model:e.addData,"label-width":"80px"}},[t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"用户名:"}},[t("el-input",{attrs:{size:"small"},model:{value:e.addData.username,callback:function(t){e.$set(e.addData,"username",t)},expression:"addData.username"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"手机号:"}},[t("el-input",{attrs:{size:"small"},model:{value:e.addData.mobile,callback:function(t){e.$set(e.addData,"mobile",t)},expression:"addData.mobile"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"性别:"}},[t("el-select",{attrs:{placeholder:"请选择性别",size:"small"},model:{value:e.addData.sex,callback:function(t){e.$set(e.addData,"sex",t)},expression:"addData.sex"}},[t("el-option",{attrs:{label:"男",value:"男"}}),t("el-option",{attrs:{label:"女",value:"女"}})],1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"状态:"}},[t("el-select",{attrs:{placeholder:"请选择状态",size:"small"},model:{value:e.addData.status,callback:function(t){e.$set(e.addData,"status",t)},expression:"addData.status"}},[t("el-option",{attrs:{label:"开启",value:"开启"}}),t("el-option",{attrs:{label:"禁用",value:"禁用"}})],1)],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"角色:"}},[t("el-select",{attrs:{placeholder:"请选择角色",size:"small"},model:{value:e.addData.role,callback:function(t){e.$set(e.addData,"role",t)},expression:"addData.role"}},e._l(e.roleData,(function(e){return t("el-option",{key:e.id,attrs:{label:e.rolename,value:e.rolename}})})),1)],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"个人简介:"}},[t("el-input",{attrs:{type:"textarea",rows:5,placeholder:"请输入内容"},model:{value:e.addData.introduction,callback:function(t){e.$set(e.addData,"introduction",t)},expression:"addData.introduction"}})],1)],1)],1)],1),t("div",{staticClass:"editButton"},[t("el-button",{attrs:{size:"small"},on:{click:e.addDrawerClose}},[e._v("取消")]),t("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.commitAddAccount}},[e._v("提交")])],1)],1)])],1)},r=[],l=a(7157),i=a(4806),o=a.n(i),n=function(){var e=this,t=e._self._c;return t("div",[t("el-drawer",{attrs:{title:e.title,visible:e.drawer,"before-close":e.handleClose,size:e.size,"show-close":!1},on:{"update:visible":function(t){e.drawer=t}}},[e._t("header"),t("div",{staticClass:"editContent"},[e._t("contents"),t("div",{staticClass:"editButton"},[e._t("button")],2)],2)],2)],1)},c=[],d={name:"MinorDrawer",data(){return{drawer:!1}},props:{size:{type:String,default:"30%"},drawerFlagD:{type:Boolean,default:!1},title:{type:String,default:"抽屉标题"}},methods:{handleClose(){this.$emit("update:drawerFlagD",!1)}},watch:{drawerFlagD(){this.drawer=this.drawerFlagD}}},u=d,m=a(1001),p=(0,m.Z)(u,n,c,!1,null,"3d587f87",null),h=p.exports,g=a(9432),b={data(){return{activeName:"first",searchValue:"",searchSelect:"1",options:[],accountQuery:{query:"",pagenum:1,pagesize:10,value:"全部角色"},accountDate:[],total:0,drawer:!1,addDrawer:!1,addData:{mobile:"",role:"",sex:"",status:"",username:"",introduction:""},editData:[],roleData:[],roleEditList:{drawer:!1,size:"560px",title:"角色编辑"},addEditList:{drawer:!1,size:"560px",title:"角色添加"},rolePermission:{id:"",beforRoleName:"",roleName:"",roleKeys:[]},addRolePermission:{roleName:"",roleKeys:[]},rolePermissionList:[],roleProps:{children:"childs",label:"name"},processlogList:{operate_account:"",operate_module:"",operate_time:"",operate_ip:"",operate_content:""}}},components:{MinorDrawer:h},created(){this.getAccountList(),this.getMenuList(),this.getRoleList()},methods:{handleClick(e){},handleSizeChange(e){this.accountQuery.pagesize=e,this.getAccountList()},handleCurrentChange(e){this.accountQuery.pagenum=e,this.getAccountList()},async getAccountList(){const{data:e}=await this.$axios.get(`${l.Z.localUrl}/accounts`,{params:this.accountQuery});if(200!==e.status)return this.$message.error("获取账号列表失败，请刷新重试");this.accountDate=e.data,this.total=e.total;window.sessionStorage.getItem("userid")},async getMenuList(){const e=await this.$axios.get(`${l.Z.localUrl}/menus`);this.rolePermissionList=e.data.data},async getRoleList(){const{data:e}=await this.$axios.get(`${l.Z.localUrl}/role`);if(200!==e.status)return this.$message.error("获取角色列表失败，请刷新重试");this.roleData=e.data,e.data.forEach((e=>{this.options.push({value:e.id,label:e.rolename})}))},async showAccountEdit(e){this.editData=o().cloneDeep(e),1===this.editData.status?this.editData.status="开启":this.editData.status="禁用";const{data:t}=await this.$axios.get(`${l.Z.localUrl}/role`);if(200!==t.status)return this.$message.error("获取角色列表失败，请刷新重试");this.roleData=t.data,this.drawer=!0},drawerClose(){this.drawer=!1},async commitEdit(){const e=await this.$axios.put(`${l.Z.localUrl}/accounts/${this.editData.userid}`,{mobile:this.editData.mobile,role:this.editData.role,sex:this.editData.sex,status:this.editData.status,username:this.editData.username,introduction:this.editData.introduction});if(200!==e.status)return this.$message.error("更改账号状态失败，请刷新重试");const t="账号管理",a=`修改了用户"${this.editData.username}"的账号信息`;(0,g.R)(t,a),this.drawer=!1,this.getAccountList()},closeEdit(){this.drawer=!1},addRole(){this.getMenuList(),this.addEditList.drawer=!0},showAddAccount(){this.addDrawer=!0},addDrawerClose(){this.addDrawer=!1,this.addData={}},async commitAddAccount(){const e=await this.$axios.post(`${l.Z.localUrl}/accounts`,{mobile:this.addData.mobile,role:this.addData.role,sex:this.addData.sex,status:this.addData.status,username:this.addData.username,introduction:this.addData.introduction});if(200!==e.status)return this.$message.error("添加账号失败，请刷新重试");const t="账号管理",a=`添加了账号"${this.addData.username}"`;(0,g.R)(t,a),this.addDrawer=!1,this.getAccountList()},async removeAccount(e){const{data:t}=await this.$axios.delete(`${l.Z.localUrl}/accounts/${e.userid}`);200!==t.status&&this.$message.error("删除账号失败，请刷新重试");const a="账号管理",s=`删除了账号"${e.username}"`;(0,g.R)(a,s),this.getAccountList()},showDrawer(e){this.roleEditList.drawer=!0,this.rolePermission.id=e.id,this.rolePermission.roleName=e.rolename,this.rolePermission.beforRoleName=e.rolename,this.$nextTick((()=>{this.$refs.roleRef.setCheckedKeys(e.menus.split(","))}))},closeDrawer(){this.roleEditList.drawer=!1},handleCheckChange(e,t,a){this.rolePermission.roleKeys=this.$refs.roleRef.getCheckedKeys(!0)},addRoleChange(){this.addRolePermission.roleKeys=this.$refs.addRoleRef.getCheckedKeys(!0)},async commitRoleEdit(){const{data:e}=await this.$axios.put(`${l.Z.localUrl}/role`,{id:this.rolePermission.id,roleName:this.rolePermission.roleName,roleKeys:this.rolePermission.roleKeys,beforRoleName:this.rolePermission.beforRoleName});if(201!==e.status)return this.$message.error("更改角色失败，请刷新重试");const t="角色管理",a=`修改了角色"${this.rolePermission.roleName}"的权限`;(0,g.R)(t,a),this.roleEditList.drawer=!1,this.getRoleList(),this.$message.success("更改角色权限成功")},async addRoles(){const{data:e}=await this.$axios.post(`${l.Z.localUrl}/role`,{roleName:this.addRolePermission.roleName,roleKeys:this.addRolePermission.roleKeys});if(200!==e.status)return this.$message.error("更改角色失败，请刷新重试");const t="角色管理",a=`添加了角色"${this.addRolePermission.roleName}"`;(0,g.R)(t,a),this.addEditList.drawer=!1,this.addRolePermission.roleName="",this.addRolePermission.roleKeys=[],this.getRoleList(),this.$message.success("添加角色成功")}}},v=b,f=(0,m.Z)(v,s,r,!1,null,"0137cca6",null),w=f.exports},3406:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return d}});var s=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"tab"},[t("el-tabs",{model:{value:e.logActiveName,callback:function(t){e.logActiveName=t},expression:"logActiveName"}},[t("el-tab-pane",{attrs:{label:"操作记录",name:"first"}},[t("el-card",[t("div",{staticClass:"account-card"},[t("span",{staticStyle:{"font-size":"14px","margin-right":"6px"}},[e._v("时间筛选: ")]),t("el-date-picker",{attrs:{type:"datetimerange","picker-options":e.pickerOptions,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right",size:"mini","value-format":"timestamp"},on:{change:e.logTime},model:{value:e.datePickerValue,callback:function(t){e.datePickerValue=t},expression:"datePickerValue"}}),t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.searchLog}},[e._v("搜索")])],1),t("div",[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.logDate}},[t("el-table-column",{attrs:{prop:"operate_account",label:"用户名",width:"420"}}),t("el-table-column",{attrs:{prop:"operate_module",label:"操作模块",width:"380"}}),t("el-table-column",{attrs:{prop:"operate_time",label:"操作时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("transformTime")(t.row.operate_time))+" ")]}}])}),t("el-table-column",{attrs:{prop:"operate_ip",label:"IP"}}),t("el-table-column",{attrs:{prop:"operate_content",label:"操作内容"}})],1)],1),t("div",{staticClass:"pagination"},[t("el-pagination",{attrs:{background:"","current-page":e.logQuery.pagenum,"page-sizes":[10,20,30,40,60],"page-size":e.logQuery.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])],1)],1)],1)])},r=[],l=a(7157),i={data(){return{logActiveName:"first",logDate:[],logQuery:{query:"",pagenum:1,pagesize:10},total:0,datePickerValue:"",pickerOptions:{shortcuts:[{text:"最近一周",onClick(e){const t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick(e){const t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick(e){const t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]}}},created(){this.getProcessLog()},methods:{handleSizeChange(e){this.logQuery.pagesize=e,this.getProcessLog()},handleCurrentChange(e){this.logQuery.pagenum=e,this.getProcessLog()},async getProcessLog(){const{data:e}=await this.$axios.get(`${l.Z.localUrl}/getProcessLog`,{params:this.logQuery});if(200!==e.status)return this.$message.error("获取操作日志失败，请刷新重试");this.logDate=e.data,this.total=e.total},logTime(e){null==e&&(this.logQuery.query="",this.getProcessLog())},searchLog(){this.logQuery.query=this.datePickerValue,this.getProcessLog()}}},o=i,n=a(1001),c=(0,n.Z)(o,s,r,!1,null,"518e591e",null),d=c.exports},9305:function(e,t,a){var s={"./customer/CustomerList.vue":579,"./dashboardover/Dashboardover.vue":6952,"./dashboardover/Overview.vue":7895,"./goods/GoodsList.vue":6251,"./home/Home.vue":7626,"./login/Login copy.vue":6027,"./login/Login.vue":2732,"./order/OrderList.vue":4077,"./set/Permissions.vue":4682,"./set/ProcessLog.vue":3406};function r(e){var t=l(e);return a(t)}function l(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}r.keys=function(){return Object.keys(s)},r.resolve=l,e.exports=r,r.id=9305}}]);
//# sourceMappingURL=454.34b17e5c.js.map