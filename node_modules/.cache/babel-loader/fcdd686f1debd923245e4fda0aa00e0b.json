{"ast":null,"code":"import axios from 'axios';\nimport api from '../../api/index'; // 保存操作记录\n\nexport async function saveProcesslog(operate_module, operate_content) {\n  // 获取ip地址\n  const ip = returnCitySN.cip;\n  const {\n    data: ress\n  } = await axios.get(`${api.localUrl}/pconlineIp`, {\n    params: {\n      ip: ip\n    }\n  });\n  if (ress.status !== 200) return this.$message.error('ip获取失败, 请刷新重试'); // const ip = ress.data.ipinfo.text\n\n  const addr = ress.data.ipdata.info1 + ress.data.ipdata.info2; // 获取当前时间\n\n  const nowTime = Date.now().toString().slice(0, 10);\n  const userName = window.sessionStorage.getItem('username');\n  const processLogs = {\n    operate_account: userName,\n    operate_module: operate_module,\n    operate_time: nowTime,\n    operate_ip: ip,\n    operate_content: operate_content,\n    operate_addr: addr\n  };\n  const res = await axios.post(`${api.localUrl}/addProcessLog`, {\n    processLogs\n  });\n  if (res.status !== 200) return this.$message.error('操作日志保存失败');\n}","map":{"version":3,"names":["axios","api","saveProcesslog","operate_module","operate_content","ip","returnCitySN","cip","data","ress","get","localUrl","params","status","$message","error","addr","ipdata","info1","info2","nowTime","Date","now","toString","slice","userName","window","sessionStorage","getItem","processLogs","operate_account","operate_time","operate_ip","operate_addr","res","post"],"sources":["/Users/minor/Documents/micro_mall/src/plugins/processlog.js"],"sourcesContent":["import axios from 'axios'\nimport api from '../../api/index'\n\n// 保存操作记录\nexport async function saveProcesslog(operate_module, operate_content) {\n    // 获取ip地址\n    const ip = returnCitySN.cip\n    const {data: ress} = await axios.get(`${api.localUrl}/pconlineIp`, {\n        params: {ip: ip}\n    })\n    if(ress.status !== 200) return this.$message.error('ip获取失败, 请刷新重试')\n    // const ip = ress.data.ipinfo.text\n    const addr = ress.data.ipdata.info1 + ress.data.ipdata.info2\n    // 获取当前时间\n    const nowTime = Date.now().toString().slice(0, 10)\n    const userName = window.sessionStorage.getItem('username')\n    const processLogs = {\n        operate_account: userName,\n        operate_module: operate_module,\n        operate_time: nowTime,\n        operate_ip: ip,\n        operate_content: operate_content,\n        operate_addr: addr\n    }\n    const res = await axios.post(`${api.localUrl}/addProcessLog`, {\n        processLogs\n    })\n    if(res.status !== 200) return this.$message.error('操作日志保存失败')\n}"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,GAAP,MAAgB,iBAAhB,C,CAEA;;AACA,OAAO,eAAeC,cAAf,CAA8BC,cAA9B,EAA8CC,eAA9C,EAA+D;EAClE;EACA,MAAMC,EAAE,GAAGC,YAAY,CAACC,GAAxB;EACA,MAAM;IAACC,IAAI,EAAEC;EAAP,IAAe,MAAMT,KAAK,CAACU,GAAN,CAAW,GAAET,GAAG,CAACU,QAAS,aAA1B,EAAwC;IAC/DC,MAAM,EAAE;MAACP,EAAE,EAAEA;IAAL;EADuD,CAAxC,CAA3B;EAGA,IAAGI,IAAI,CAACI,MAAL,KAAgB,GAAnB,EAAwB,OAAO,KAAKC,QAAL,CAAcC,KAAd,CAAoB,eAApB,CAAP,CAN0C,CAOlE;;EACA,MAAMC,IAAI,GAAGP,IAAI,CAACD,IAAL,CAAUS,MAAV,CAAiBC,KAAjB,GAAyBT,IAAI,CAACD,IAAL,CAAUS,MAAV,CAAiBE,KAAvD,CARkE,CASlE;;EACA,MAAMC,OAAO,GAAGC,IAAI,CAACC,GAAL,GAAWC,QAAX,GAAsBC,KAAtB,CAA4B,CAA5B,EAA+B,EAA/B,CAAhB;EACA,MAAMC,QAAQ,GAAGC,MAAM,CAACC,cAAP,CAAsBC,OAAtB,CAA8B,UAA9B,CAAjB;EACA,MAAMC,WAAW,GAAG;IAChBC,eAAe,EAAEL,QADD;IAEhBtB,cAAc,EAAEA,cAFA;IAGhB4B,YAAY,EAAEX,OAHE;IAIhBY,UAAU,EAAE3B,EAJI;IAKhBD,eAAe,EAAEA,eALD;IAMhB6B,YAAY,EAAEjB;EANE,CAApB;EAQA,MAAMkB,GAAG,GAAG,MAAMlC,KAAK,CAACmC,IAAN,CAAY,GAAElC,GAAG,CAACU,QAAS,gBAA3B,EAA4C;IAC1DkB;EAD0D,CAA5C,CAAlB;EAGA,IAAGK,GAAG,CAACrB,MAAJ,KAAe,GAAlB,EAAuB,OAAO,KAAKC,QAAL,CAAcC,KAAd,CAAoB,UAApB,CAAP;AAC1B"},"metadata":{},"sourceType":"module"}