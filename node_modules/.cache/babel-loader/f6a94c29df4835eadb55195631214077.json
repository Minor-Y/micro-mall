{"ast":null,"code":"import axios from 'axios';\nimport api from '../../api/index'; // 保存操作记录\n\nexport async function saveProcesslog(operate_module, operate_content) {\n  // 获取ip地址\n  const {\n    data: ress\n  } = await axios.get(`${api.localUrl}/pconlineIp`);\n  if (ress.status !== 200) return this.$message.error('ip获取失败, 请刷新重试'); // const ip = ress.data.ipinfo.text\n\n  const ip = returnCitySN.cip;\n  const addr = ress.data.ipdata.info1 + ress.data.ipdata.info2; // 获取当前时间\n\n  const nowTime = Date.now().toString().slice(0, 10);\n  const userName = window.sessionStorage.getItem('username');\n  const processLogs = {\n    operate_account: userName,\n    operate_module: operate_module,\n    operate_time: nowTime,\n    operate_ip: ip,\n    operate_content: operate_content,\n    operate_addr: addr\n  };\n  const res = await axios.post(`${api.localUrl}/addProcessLog`, {\n    processLogs\n  });\n  if (res.status !== 200) return this.$message.error('操作日志保存失败');\n}","map":{"version":3,"names":["axios","api","saveProcesslog","operate_module","operate_content","data","ress","get","localUrl","status","$message","error","ip","returnCitySN","cip","addr","ipdata","info1","info2","nowTime","Date","now","toString","slice","userName","window","sessionStorage","getItem","processLogs","operate_account","operate_time","operate_ip","operate_addr","res","post"],"sources":["/Users/minor/Documents/micro_mall/src/plugins/processlog.js"],"sourcesContent":["import axios from 'axios'\nimport api from '../../api/index'\n\n// 保存操作记录\nexport async function saveProcesslog(operate_module, operate_content) {\n    // 获取ip地址\n    const {data: ress} = await axios.get(`${api.localUrl}/pconlineIp`)\n    if(ress.status !== 200) return this.$message.error('ip获取失败, 请刷新重试')\n    // const ip = ress.data.ipinfo.text\n    const ip = returnCitySN.cip\n    const addr = ress.data.ipdata.info1 + ress.data.ipdata.info2\n    // 获取当前时间\n    const nowTime = Date.now().toString().slice(0, 10)\n    const userName = window.sessionStorage.getItem('username')\n    const processLogs = {\n        operate_account: userName,\n        operate_module: operate_module,\n        operate_time: nowTime,\n        operate_ip: ip,\n        operate_content: operate_content,\n        operate_addr: addr\n    }\n    const res = await axios.post(`${api.localUrl}/addProcessLog`, {\n        processLogs\n    })\n    if(res.status !== 200) return this.$message.error('操作日志保存失败')\n}"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,GAAP,MAAgB,iBAAhB,C,CAEA;;AACA,OAAO,eAAeC,cAAf,CAA8BC,cAA9B,EAA8CC,eAA9C,EAA+D;EAClE;EACA,MAAM;IAACC,IAAI,EAAEC;EAAP,IAAe,MAAMN,KAAK,CAACO,GAAN,CAAW,GAAEN,GAAG,CAACO,QAAS,aAA1B,CAA3B;EACA,IAAGF,IAAI,CAACG,MAAL,KAAgB,GAAnB,EAAwB,OAAO,KAAKC,QAAL,CAAcC,KAAd,CAAoB,eAApB,CAAP,CAH0C,CAIlE;;EACA,MAAMC,EAAE,GAAGC,YAAY,CAACC,GAAxB;EACA,MAAMC,IAAI,GAAGT,IAAI,CAACD,IAAL,CAAUW,MAAV,CAAiBC,KAAjB,GAAyBX,IAAI,CAACD,IAAL,CAAUW,MAAV,CAAiBE,KAAvD,CANkE,CAOlE;;EACA,MAAMC,OAAO,GAAGC,IAAI,CAACC,GAAL,GAAWC,QAAX,GAAsBC,KAAtB,CAA4B,CAA5B,EAA+B,EAA/B,CAAhB;EACA,MAAMC,QAAQ,GAAGC,MAAM,CAACC,cAAP,CAAsBC,OAAtB,CAA8B,UAA9B,CAAjB;EACA,MAAMC,WAAW,GAAG;IAChBC,eAAe,EAAEL,QADD;IAEhBrB,cAAc,EAAEA,cAFA;IAGhB2B,YAAY,EAAEX,OAHE;IAIhBY,UAAU,EAAEnB,EAJI;IAKhBR,eAAe,EAAEA,eALD;IAMhB4B,YAAY,EAAEjB;EANE,CAApB;EAQA,MAAMkB,GAAG,GAAG,MAAMjC,KAAK,CAACkC,IAAN,CAAY,GAAEjC,GAAG,CAACO,QAAS,gBAA3B,EAA4C;IAC1DoB;EAD0D,CAA5C,CAAlB;EAGA,IAAGK,GAAG,CAACxB,MAAJ,KAAe,GAAlB,EAAuB,OAAO,KAAKC,QAAL,CAAcC,KAAd,CAAoB,UAApB,CAAP;AAC1B"},"metadata":{},"sourceType":"module"}