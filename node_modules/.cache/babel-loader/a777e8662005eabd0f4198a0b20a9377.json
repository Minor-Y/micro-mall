{"ast":null,"code":"import _Message2 from \"element-ui/lib/theme-chalk/message.css\";\nimport \"element-ui/lib/theme-chalk/base.css\";\nimport _Message from \"element-ui/lib/message\";\nimport Vue from 'vue';\nimport VueRouter from 'vue-router';\nimport store from '../store/index';\nimport _ from 'lodash';\nimport Customerlist from '@/views/customer/CustomerList.vue';\nVue.use(VueRouter); // 解决ElementUI导航栏中的vue-router在3.0版本以上重复点菜单报错问题\n\nconst originalPush = VueRouter.prototype.push;\n\nVueRouter.prototype.push = function push(location) {\n  return originalPush.call(this, location).catch(err => err);\n};\n\nconst constantRouterMap = [{\n  path: '/',\n  redirect: '/login'\n}, {\n  path: '/login',\n  name: 'login',\n  meta: {\n    index: 0\n  },\n  component: () => import(\n  /* webpackChunkName: \"login\" */\n  '../views/login/Login.vue')\n}, {\n  path: '/home',\n  name: 'home',\n  meta: {\n    index: 0\n  },\n  component: () => import(\n  /* webpackChunkName: \"home\" */\n  '../views/home/Home.vue')\n} // {\n//   path: '/home',\n//   name: 'home',\n//   meta: {index: 1},\n//   redirect: '/dashboardover',\n//   component: () => import(/* webpackChunkName: \"home\" */ '../views/home/Home.vue'),\n//   children: [\n//     {\n//       path: '/dashboardover',\n//       name: 'dashboardover',\n//       meta: {index: 2},\n//       component: () => import(/* webpackChunkName: \"dashboardover\" */ '../views/dashboardover/Dashboardover.vue'),\n//     },\n//     {\n//       path: '/goodslist',\n//       name: 'goodslist',\n//       meta: {index: 3},\n//       component: () => import(/* webpackChunkName: \"goods\" */ '../views/goods/GoodsList.vue'),\n//     },\n//     {\n//       path: '/orderlist',\n//       name: 'orderlist',\n//       meta: {index: 4},\n//       component: () => import(/* webpackChunkName: \"order\" */ '../views/order/OrderList.vue'),\n//     },\n//     {\n//       path: '/customerlist',\n//       name: 'customerlist',\n//       meta: {index: 5},\n//       component: () => import(/* webpackChunkName: \"customer\" */ '../views/customer/CustomerList.vue'),\n//     },\n//     {\n//       path: '/permissions',\n//       name: 'permissions',\n//       meta: {index: 6},\n//       component: () => import(/* webpackChunkName: \"set\" */ '../views/set/Permissions.vue'),\n//     },\n//   ]\n// }\n]; // 注册路由\n\nconst router = new VueRouter({\n  routes: constantRouterMap\n}); // 异步路由\n\nexport const asyncRouter = [// {\n//   path: '/home',\n//   name: 'home',\n//   meta: { index: 1 },\n//   redirect: '/dashboardover',\n//   component: () => import(/* webpackChunkName: \"home\" */ '../views/home/Home.vue'),\n//   children: [\n{\n  path: '/dashboardover',\n  name: 'dashboardover',\n  meta: {\n    index: 2\n  },\n  component: () => import(\n  /* webpackChunkName: \"dashboardover\" */\n  '../views/dashboardover/Dashboardover.vue')\n}, {\n  path: '/goodslist',\n  name: 'goodslist',\n  meta: {\n    index: 3\n  },\n  component: () => import(\n  /* webpackChunkName: \"goods\" */\n  '../views/goods/GoodsList.vue')\n}, {\n  path: '/orderlist',\n  name: 'orderlist',\n  meta: {\n    index: 4\n  },\n  component: () => import(\n  /* webpackChunkName: \"order\" */\n  '../views/order/OrderList.vue')\n}, {\n  path: '/customerlist',\n  name: 'customerlist',\n  meta: {\n    index: 5\n  },\n  component: Customerlist\n}, {\n  path: '/permissions',\n  name: 'permissions',\n  meta: {\n    index: 6\n  },\n  component: () => import(\n  /* webpackChunkName: \"set\" */\n  '../views/set/Permissions.vue')\n}]; // }\n// ]\n// 处理component\n// function loadView(component) {\n//   return () => import(/* webpackChunkName: \"home\" */ `../views/${component}`)\n//   // return (resolve) => require([`@/views/${component}`], resolve)\n// }\n// function formatRouter(routes, Layout) {\n//   const formatRouterArr = []\n//   routes.forEach(route => {\n//   })\n// }\n// 根据后端返回权限匹配对应路由\n\nfunction routerMatch(permission, asyncRoute) {\n  return new Promise((resolve, reject) => {\n    const routers = [{\n      path: '/home',\n      name: 'home',\n      meta: {\n        index: 1\n      },\n      // redirect: '/dashboardover',\n      component: () => import(\n      /* webpackChunkName: \"home\" */\n      '../views/home/Home.vue'),\n      children: []\n    }];\n\n    function createRouter(permission) {\n      permission.forEach(item => {\n        console.log('后台返回', item);\n\n        if (item.childs && item.childs.length > 0) {\n          createRouter(item.childs);\n        }\n\n        let path = item.path;\n        asyncRoute.find(s => {\n          if (s.children) {\n            s.children.find(y => {\n              console.log('前端保存', y);\n              console.log(path);\n\n              if (y.name === path) {\n                if (item.component === 'Layout') {\n                  y.component = loadView();\n                } else {\n                  y.component = loadView(item.component);\n                  routers[0].children.push(y);\n                }\n              }\n            });\n          } else {\n            if (s.name === path) {\n              s.component = loadView(item.component);\n              routers[0].children.push(s);\n            }\n          }\n        });\n      });\n    }\n\n    createRouter(permission);\n    console.log('最终的路由数组', routers);\n    resolve(routers);\n  });\n}\n\nlet isDisposeRouter = 0;\n\nconst disposeRouter = perss => {\n  const routerList = [];\n  perss.forEach(menu => {\n    if (menu.childs) {\n      if (menu.component !== 'Layout') {\n        let mList = {\n          path: menu.path,\n          name: menu.path.split('/')[1],\n          meta: {\n            id: menu.id\n          },\n          component: resolve => require([`@/views/${menu.component}.vue`], resolve)\n        };\n        routerList.push(mList);\n      } else {\n        menu.childs.forEach(item => {\n          let rList = {\n            path: item.path,\n            name: item.path.split('/')[1],\n            meta: {\n              id: item.id\n            },\n            component: resolve => require([`@/views/${item.component}.vue`], resolve)\n          };\n          routerList.push(rList);\n        });\n      }\n    }\n  });\n  console.log('打印下处理好的路由数组', routerList);\n  isDisposeRouter = 1;\n  return routerList;\n}; // 挂载路由守卫\n\n\nrouter.beforeEach((to, from, next) => {\n  // 获取token\n  let token = window.sessionStorage.getItem('token');\n  const tokenStart = window.sessionStorage.getItem('tokenStart');\n  const nowDate = new Date().getTime();\n  const timeOver = 3600 * 24 * 1000;\n\n  if (nowDate - tokenStart > timeOver) {\n    // 判断token是否过期\n    token = null;\n  }\n\n  if (token) {\n    // 判断token是否存在\n    if (to.path === '/login') {\n      next('/home');\n    } else {\n      console.log('现在的vuex路由列表', store.state.menuRouterList);\n\n      if (store.state.menuRouterList.length === 0) {\n        try {\n          store.commit('getMenuRouterList'); // if (router.getRoutes().length === 3) {\n\n          console.log('路由添加前', router.getRoutes());\n\n          const permiss = _.cloneDeep(store.state.menuRouterList);\n\n          console.log('permiss', permiss);\n          const routerLists = disposeRouter(permiss);\n          console.log('处理函数返回的路由数组', routerLists);\n          routerLists.forEach(item => {\n            router.addRoute('home', item);\n          }); // asyncRouter.forEach((item) => {\n          //   router.addRoute('home', item)\n          // })\n          // routerLists.forEach((item) => {\n          //   router.addRoute('home', {\n          //     path: item.path,\n          //     name: item.name,\n          //     meta: { id: item.meta.id },\n          //     component: () => import(`../views/${item.component}.vue`)\n          //   })\n          // })\n\n          console.log(\"路由添加后\", router.getRoutes());\n          console.log('to:', to, 'from:', from);\n          next({ ...to,\n            replace: true\n          }); // } else {\n          //   next()\n          // }\n        } catch (err) {\n          console.log(err);\n        }\n      } else {\n        next();\n      }\n    }\n  } else {\n    if (to.path === '/login') {\n      next();\n    } else {\n      _Message.error('登录状态过期，请重新登录');\n\n      window.sessionStorage.clear();\n      next('/login');\n    }\n  } // next()\n\n});\nexport default router;","map":{"version":3,"names":["Vue","VueRouter","store","_","Customerlist","use","originalPush","prototype","push","location","call","catch","err","constantRouterMap","path","redirect","name","meta","index","component","router","routes","asyncRouter","routerMatch","permission","asyncRoute","Promise","resolve","reject","routers","children","createRouter","forEach","item","console","log","childs","length","find","s","y","loadView","isDisposeRouter","disposeRouter","perss","routerList","menu","mList","split","id","require","rList","beforeEach","to","from","next","token","window","sessionStorage","getItem","tokenStart","nowDate","Date","getTime","timeOver","state","menuRouterList","commit","getRoutes","permiss","cloneDeep","routerLists","addRoute","replace","error","clear"],"sources":["/Users/minor/Documents/micro_mall/src/router/index.js"],"sourcesContent":["import Vue from 'vue'\nimport VueRouter from 'vue-router'\nimport { Message } from 'element-ui'\nimport store from '../store/index'\nimport _ from 'lodash'\n\nimport Customerlist from '@/views/customer/CustomerList.vue'\n\nVue.use(VueRouter)\n\n// 解决ElementUI导航栏中的vue-router在3.0版本以上重复点菜单报错问题\nconst originalPush = VueRouter.prototype.push\nVueRouter.prototype.push = function push(location) {\n  return originalPush.call(this, location).catch(err => err)\n}\n\nconst constantRouterMap = [\n  {\n    path: '/',\n    redirect: '/login'\n  },\n  {\n    path: '/login',\n    name: 'login',\n    meta: { index: 0 },\n    component: () => import(/* webpackChunkName: \"login\" */ '../views/login/Login.vue')\n  },\n  {\n    path: '/home',\n    name: 'home',\n    meta: { index: 0 },\n    component: () => import(/* webpackChunkName: \"home\" */ '../views/home/Home.vue'),\n\n  },\n  // {\n  //   path: '/home',\n  //   name: 'home',\n  //   meta: {index: 1},\n  //   redirect: '/dashboardover',\n  //   component: () => import(/* webpackChunkName: \"home\" */ '../views/home/Home.vue'),\n  //   children: [\n  //     {\n  //       path: '/dashboardover',\n  //       name: 'dashboardover',\n  //       meta: {index: 2},\n  //       component: () => import(/* webpackChunkName: \"dashboardover\" */ '../views/dashboardover/Dashboardover.vue'),\n  //     },\n  //     {\n  //       path: '/goodslist',\n  //       name: 'goodslist',\n  //       meta: {index: 3},\n  //       component: () => import(/* webpackChunkName: \"goods\" */ '../views/goods/GoodsList.vue'),\n  //     },\n  //     {\n  //       path: '/orderlist',\n  //       name: 'orderlist',\n  //       meta: {index: 4},\n  //       component: () => import(/* webpackChunkName: \"order\" */ '../views/order/OrderList.vue'),\n  //     },\n  //     {\n  //       path: '/customerlist',\n  //       name: 'customerlist',\n  //       meta: {index: 5},\n  //       component: () => import(/* webpackChunkName: \"customer\" */ '../views/customer/CustomerList.vue'),\n  //     },\n  //     {\n  //       path: '/permissions',\n  //       name: 'permissions',\n  //       meta: {index: 6},\n  //       component: () => import(/* webpackChunkName: \"set\" */ '../views/set/Permissions.vue'),\n  //     },\n  //   ]\n  // }\n]\n\n// 注册路由\nconst router = new VueRouter({\n  routes: constantRouterMap\n})\n\n// 异步路由\nexport const asyncRouter = [\n  // {\n  //   path: '/home',\n  //   name: 'home',\n  //   meta: { index: 1 },\n  //   redirect: '/dashboardover',\n  //   component: () => import(/* webpackChunkName: \"home\" */ '../views/home/Home.vue'),\n  //   children: [\n  {\n    path: '/dashboardover',\n    name: 'dashboardover',\n    meta: { index: 2 },\n    component: () => import(/* webpackChunkName: \"dashboardover\" */ '../views/dashboardover/Dashboardover.vue'),\n  },\n  {\n    path: '/goodslist',\n    name: 'goodslist',\n    meta: { index: 3 },\n    component: () => import(/* webpackChunkName: \"goods\" */ '../views/goods/GoodsList.vue'),\n  },\n  {\n    path: '/orderlist',\n    name: 'orderlist',\n    meta: { index: 4 },\n    component: () => import(/* webpackChunkName: \"order\" */ '../views/order/OrderList.vue'),\n  },\n  {\n    path: '/customerlist',\n    name: 'customerlist',\n    meta: { index: 5 },\n    component: Customerlist\n  },\n  {\n    path: '/permissions',\n    name: 'permissions',\n    meta: { index: 6 },\n    component: () => import(/* webpackChunkName: \"set\" */ '../views/set/Permissions.vue'),\n  },\n]\n// }\n// ]\n\n// 处理component\n// function loadView(component) {\n//   return () => import(/* webpackChunkName: \"home\" */ `../views/${component}`)\n//   // return (resolve) => require([`@/views/${component}`], resolve)\n// }\n// function formatRouter(routes, Layout) {\n//   const formatRouterArr = []\n//   routes.forEach(route => {\n\n//   })\n// }\n\n// 根据后端返回权限匹配对应路由\nfunction routerMatch(permission, asyncRoute) {\n  return new Promise((resolve, reject) => {\n    const routers = [\n      {\n        path: '/home',\n        name: 'home',\n        meta: { index: 1 },\n        // redirect: '/dashboardover',\n        component: () => import(/* webpackChunkName: \"home\" */ '../views/home/Home.vue'),\n        children: []\n      }\n    ]\n    function createRouter(permission) {\n      permission.forEach(item => {\n        console.log('后台返回', item)\n        if (item.childs && item.childs.length > 0) {\n          createRouter(item.childs)\n        }\n        let path = item.path\n        asyncRoute.find(s => {\n          if (s.children) {\n            s.children.find(y => {\n              console.log('前端保存', y)\n              console.log(path)\n              if (y.name === path) {\n                if (item.component === 'Layout') {\n                  y.component = loadView()\n                } else {\n                  y.component = loadView(item.component)\n                  routers[0].children.push(y)\n                }\n              }\n            })\n          } else {\n            if (s.name === path) {\n              s.component = loadView(item.component)\n              routers[0].children.push(s)\n            }\n          }\n        })\n      })\n    }\n    createRouter(permission)\n    console.log('最终的路由数组', routers)\n\n    resolve(routers)\n  })\n}\n\nlet isDisposeRouter = 0\nconst disposeRouter = (perss) => {\n  const routerList = []\n  perss.forEach((menu) => {\n    if (menu.childs) {\n      if (menu.component !== 'Layout') {\n        let mList = {\n          path: menu.path,\n          name: menu.path.split('/')[1],\n          meta: { id: menu.id },\n          component: resolve => require([`@/views/${menu.component}.vue`], resolve)\n        }\n        routerList.push(mList)\n      } else {\n        menu.childs.forEach(item => {\n          let rList = {\n            path: item.path,\n            name: item.path.split('/')[1],\n            meta: { id: item.id },\n            component: resolve => require([`@/views/${item.component}.vue`], resolve)\n          }\n          routerList.push(rList)\n        })\n      }\n\n    }\n  })\n  console.log('打印下处理好的路由数组', routerList)\n  isDisposeRouter = 1\n  return routerList\n}\n\n// 挂载路由守卫\nrouter.beforeEach((to, from, next) => {\n  // 获取token\n  let token = window.sessionStorage.getItem('token')\n  const tokenStart = window.sessionStorage.getItem('tokenStart')\n  const nowDate = new Date().getTime()\n  const timeOver = 3600 * 24 * 1000\n  if (nowDate - tokenStart > timeOver) { // 判断token是否过期\n    token = null\n  }\n  if (token) { // 判断token是否存在\n    if (to.path === '/login') {\n      next('/home')\n    } else {\n      console.log('现在的vuex路由列表', store.state.menuRouterList)\n      if (store.state.menuRouterList.length === 0) {\n        try {\n          store.commit('getMenuRouterList')\n          // if (router.getRoutes().length === 3) {\n          console.log('路由添加前', router.getRoutes())\n          const permiss = _.cloneDeep(store.state.menuRouterList)\n          console.log('permiss', permiss)\n          const routerLists = disposeRouter(permiss)\n          console.log('处理函数返回的路由数组', routerLists)\n\n          routerLists.forEach((item) => {\n            router.addRoute('home', item)\n          })\n          // asyncRouter.forEach((item) => {\n          //   router.addRoute('home', item)\n          // })\n          // routerLists.forEach((item) => {\n          //   router.addRoute('home', {\n          //     path: item.path,\n          //     name: item.name,\n          //     meta: { id: item.meta.id },\n          //     component: () => import(`../views/${item.component}.vue`)\n          //   })\n          // })\n          console.log(\"路由添加后\", router.getRoutes())\n          console.log('to:', to, 'from:', from)\n          next({ ...to, replace: true })\n          // } else {\n          //   next()\n          // }\n        } catch (err) {\n          console.log(err)\n        }\n      } else {\n        next()\n      }\n\n    }\n\n  } else {\n    if (to.path === '/login') {\n      next()\n    } else {\n      Message.error('登录状态过期，请重新登录')\n      window.sessionStorage.clear()\n      next('/login')\n    }\n  }\n\n\n  // next()\n})\n\nexport default router\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}