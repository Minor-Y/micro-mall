{"ast":null,"code":"import api from '../../../api/index';\nexport default {\n  data() {\n    return {\n      goodsList: [],\n      search: '',\n      total: 0,\n      currentPage: 1,\n      pageSize: 10,\n      addGoodsVisible: false,\n      goodsInfo: {\n        goodsName: '',\n        tag: '',\n        price: '',\n        salesNum: '',\n        stock: ''\n      }\n    };\n  },\n\n  created() {\n    this.getGoodsList();\n  },\n\n  methods: {\n    async getGoodsList() {\n      const gList = await this.$axios.get(`${api.defultUrl}/goods`);\n      if (gList.data.meta.status !== 200) return this.$message.error('获取商品列表失败');\n      this.goodsList = gList.data.data;\n      this.total = gList.data.data.length;\n      console.log(gList);\n    },\n\n    // 监听页面展示条数\n    handleSizeChange(size) {\n      this.pageSize = size;\n    },\n\n    // 监听当前选择的页码\n    handleCurrentChange(page) {\n      this.currentPage = page;\n    },\n\n    showAddGoods() {\n      this.addGoodsVisible = true;\n    }\n\n  }\n};","map":{"version":3,"mappings":"AA8DA;AACA;EACAA;IACA;MACAC,aADA;MAEAC,UAFA;MAGAC,QAHA;MAIAC,cAJA;MAKAC,YALA;MAMAC,sBANA;MAOAC;QACAC,aADA;QAEAC,OAFA;QAGAC,SAHA;QAIAC,YAJA;QAKAC;MALA;IAPA;EAeA,CAjBA;;EAkBAC;IACA;EACA,CApBA;;EAqBAC;IACA;MACA;MACA,oCACA;MACA;MACA;MACAC;IACA,CARA;;IASA;IACAC;MACA;IACA,CAZA;;IAaA;IACAC;MACA;IACA,CAhBA;;IAiBAC;MACA;IACA;;EAnBA;AArBA","names":["data","goodsList","search","total","currentPage","pageSize","addGoodsVisible","goodsInfo","goodsName","tag","price","salesNum","stock","created","methods","console","handleSizeChange","handleCurrentChange","showAddGoods"],"sourceRoot":"src/views/goods","sources":["GoodsList.vue"],"sourcesContent":["<template>\n  <div>\n    <el-card class=\"goods\">\n      <div class=\"goods-top\">\n        <!-- 输入框和添加商品按钮 -->\n        <el-input placeholder=\"请输入内容\" v-model=\"search\" size=\"small\" clearable @clear=\"getGoodsList\">\n          <el-button slot=\"append\" icon=\"el-icon-search\" @click=\"getGoodsList\"></el-button>\n        </el-input>\n        <el-button type=\"primary\" size=\"small\" @click=\"showAddGoods\">添加商品</el-button>\n      </div>\n      <!-- 商品展示去区 -->\n      <el-table ref=\"goodslist\" :data=\"goodsList.slice((currentPage - 1) * pageSize, currentPage * pageSize)\" stripe>\n        <el-table-column type=\"selection\" width=\"55\"></el-table-column>\n        <el-table-column label=\"商品名称\" prop=\"goodsName\"></el-table-column>\n        <el-table-column label=\"标签\" prop=\"tag\"></el-table-column>\n        <el-table-column label=\"价格\" prop=\"price\" width=\"60\"></el-table-column>\n        <el-table-column label=\"销量\" prop=\"salesNum\"></el-table-column>\n        <el-table-column label=\"上下架时间\" width=\"160\">\n          <template slot-scope=\"scope\">\n            {{scope.row.putAwayDate | transformTime}}\n          </template>\n        </el-table-column>\n        <el-table-column label=\"剩余库存\" prop=\"stock\"></el-table-column>\n        <el-table-column label=\"操作\">\n          <el-button type=\"primary\" size=\"mini\">编辑</el-button>\n        </el-table-column>\n      </el-table>\n      <!-- 分页 -->\n      <el-pagination background @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\" :current-page=\"currentPage\" :page-sizes=\"[10, 20, 30, 40]\" :page-size=\"pageSize\" layout=\"total, sizes, prev, pager, next, jumper\" :total=\"total\">\n      </el-pagination>\n    </el-card>\n    <!-- 添加商品弹出框 -->\n    <el-dialog title=\"添加商品\" :visible.sync=\"addGoodsVisible\" width=\"36%\">\n      <el-form :model=\"goodsInfo\" class=\"goods-add\">\n        <el-form-item label=\"商品名称\">\n          <el-input v-model=\"goodsInfo.goodsName\" size=\"small\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"商品标签\">\n          <el-select v-model=\"goodsInfo.tag\" placeholder=\"请选择标签\" size=\"small\">\n            <el-option label=\"食用油\" value=\"shiyongyou\"></el-option>\n            <el-option label=\"面粉\" value=\"mianfen\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"价格\">\n          <el-input v-model=\"goodsInfo.price\" size=\"small\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"销量\">\n          <el-input v-model=\"goodsInfo.salesNum\" size=\"small\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"库存\">\n          <el-input v-model=\"goodsInfo.stock\" size=\"small\"></el-input>\n        </el-form-item>\n      </el-form>\n      <span slot=\"footer\">\n        <el-button @click=\"addGoodsVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"addGoodsVisible = false\">确 定</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport api from '../../../api/index'\nexport default {\n  data() {\n    return {\n      goodsList: [],\n      search: '',\n      total: 0,\n      currentPage: 1,\n      pageSize: 10,\n      addGoodsVisible: false,\n      goodsInfo: {\n        goodsName: '',\n        tag: '',\n        price: '',\n        salesNum: '',\n        stock: '',\n      },\n    }\n  },\n  created() {\n    this.getGoodsList()\n  },\n  methods: {\n    async getGoodsList() {\n      const gList = await this.$axios.get(`${api.defultUrl}/goods`)\n      if (gList.data.meta.status !== 200)\n        return this.$message.error('获取商品列表失败')\n      this.goodsList = gList.data.data\n      this.total = gList.data.data.length\n      console.log(gList)\n    },\n    // 监听页面展示条数\n    handleSizeChange(size) {\n      this.pageSize = size\n    },\n    // 监听当前选择的页码\n    handleCurrentChange(page) {\n      this.currentPage = page\n    },\n    showAddGoods() {\n      this.addGoodsVisible = true\n    },\n  },\n}\n</script>\n\n<style lang=\"less\" scoped>\n.goods {\n  .goods-top {\n    display: flex;\n    justify-content: space-between;\n    margin-bottom: 18px;\n  }\n  .el-input {\n    width: 340px;\n  }\n}\n.el-pagination {\n  margin-top: 16px;\n  display: flex;\n  justify-content: flex-start;\n}\n.goods-add {\n  padding: 0 30px 0 30px;\n  .el-form-item {\n    display: flex;\n    justify-content: flex-start;\n  }\n  .el-input {\n    width: 270px;\n  }\n  .el-select {\n    width: 270px;\n  }\n}\n::v-deep .el-form-item__label {\n    width: 70px;\n}\n::v-deep .el-dialog__footer {\n    padding: 0px 20px 20px;\n}\n::v-deep .el-table th.el-table__cell {\n    background-color: #f5f6f8;\n}\n</style>"]},"metadata":{},"sourceType":"module"}