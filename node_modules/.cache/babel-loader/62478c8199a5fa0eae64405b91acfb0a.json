{"ast":null,"code":"import _ from 'lodash';\nimport axios from 'axios';\nimport api from '../../../api/index';\nimport { mapState, mapMutations, mapGetters } from 'vuex';\nexport default {\n  data() {\n    return {\n      transitionName: '',\n      menuslist: [],\n      isCollapse: false,\n      elicon: {\n        101: 'el-icon-data-analysis',\n        //首页概览\n        112: 'el-icon-goods',\n        //商品\n        113: 'el-icon-shopping-bag-2',\n        //商品列表\n        123: 'el-icon-document-remove',\n        //订单\n        124: 'el-icon-tickets',\n        //订单列表\n        134: 'el-icon-user',\n        //客户\n        135: 'el-icon-user-solid',\n        //客户列表\n        136: 'el-icon-collection-tag',\n        //客户标签\n        145: 'el-icon-data-line',\n        //数据\n        146: 'el-icon-pie-chart',\n        //数据概览\n        147: 'el-icon-c-scale-to-original',\n        //客流分析\n        156: 'el-icon-setting',\n        //设置\n        157: 'el-icon-s-home',\n        //店铺信息\n        158: 'el-icon-s-custom',\n        //账号权限\n        159: 'el-icon-document' //操作日志\n\n      },\n      activePath: '/dashboardover',\n      addTabsValue: '/dashboardover',\n      addTabs: [{\n        name: '/dashboardover',\n        title: '概览'\n      }],\n      tabTitle: '',\n      crumbss: {\n        name: '概览',\n        path: 'dashboardover',\n        childs: {}\n      },\n      sessionCrumbs: [{\n        firstName: '概览',\n        lastName: '',\n        path: '/dashboardover'\n      }]\n    };\n  },\n\n  computed: { ...mapState(['userId', 'menuRouterList']),\n    ...mapGetters(['getMenuRouter'])\n  },\n\n  created() {\n    this.getMenusList();\n    this.activePath = window.sessionStorage.getItem('activePath'); // 初始时从sessionStorage里取出刷新页面前已存储的展示的tab页信息\n\n    const sessionTab = JSON.parse(window.sessionStorage.getItem('addTabs'));\n\n    if (sessionTab) {\n      this.sessionCrumbs = sessionTab.crumbs;\n\n      if (sessionTab.addTabs.length != 0 && sessionTab.addTabsPath.length != 0) {\n        for (let i = 0; i < sessionTab.addTabs.length; i++) {\n          this.addTabs.push({\n            name: sessionTab.addTabs[i].name,\n            title: sessionTab.addTabs[i].title\n          });\n        }\n\n        this.activePath = sessionTab.currActiveTabs;\n        this.addTabsValue = sessionTab.currActiveTabs;\n        this.$router.push({\n          path: this.addTabsValue\n        });\n      } else {\n        this.activePath = sessionTab.currActiveTabs;\n      }\n    } // 取页面刷新前激活页path对应面包屑信息数组里path的元素下标\n\n\n    let index = this.sessionCrumbs.findIndex(item => {\n      return this.addTabsValue === item.lastPath;\n    }); // 将sessionStorage中保存的面包屑信息取出\n\n    if (index > 0) {\n      this.crumbss.name = this.sessionCrumbs[index].firstName;\n      this.crumbss.childs.name = this.sessionCrumbs[index].lastName;\n    } else {\n      index = 0;\n      this.crumbss.name = this.sessionCrumbs[index].firstName;\n      this.crumbss.childs.name = this.sessionCrumbs[index].lastName;\n    }\n  },\n\n  methods: { ...mapMutations(['getUserId', 'setRouter', 'getMenuRouterList']),\n\n    getMenusList() {\n      // const { data: res } = await this.$axios.get('menus')\n      // const { data: res } = await axios.get(`${api.defultUrl}/menus`)\n      // if (res.meta.status !== 200)\n      //   return this.$message.error('获取侧边菜单失败')\n      // this.menuslist = res.data\n      // this.getUserId()\n      // const { data: res } = await axios.get(`${api.localUrl}/menus`, {params: {userid: this.userId}})\n      // if (res.status !== 200)\n      //   return this.$message.error('获取菜单失败')\n      // this.menuslist = res.data\n      // this.setRouter(res.data) // 保存用户角色权限到vuex中\n      // console.log(this.menuRouterList)\n      // const res = this.getMenuRouter()\n      this.getMenuRouterList();\n      this.menuslist = this.menuRouterList;\n      console.log('渲染路由', this.menuslist);\n      console.log('路由是', this.$router);\n\n      const loadView = view => {\n        // return () => Promise.resolve(require(`@/views/${view}`).default)\n        return () => import(`./views/${view}.vue`);\n      };\n\n      let aa = loadView('home/Home');\n      console.log('dada', aa);\n    },\n\n    // 展开或者折叠侧边栏\n    collapseOrSpread() {\n      this.isCollapse = !this.isCollapse;\n    },\n\n    saveDashboard(das) {\n      this.addTabsValue = das.path;\n      window.sessionStorage.setItem('activePath', this.addTabsValue);\n    },\n\n    savePath(paths, crumbs) {\n      console.log(paths, crumbs); // 面包屑跟随改变\n\n      const crumbsInfo = _.cloneDeep(crumbs); // 深拷贝，避免后续修改操作影响menu\n\n\n      this.crumbss.name = crumbsInfo.name;\n      this.crumbss.path = crumbsInfo.path;\n\n      if (crumbsInfo.childs) {\n        this.crumbss.childs = crumbsInfo.childs[0];\n      } // 将当前激活tab页的name(path地址)保存到sessionStorage里\n\n\n      this.addTabsValue = paths.path;\n      window.sessionStorage.setItem('activePath', this.addTabsValue);\n      this.activePath = paths.path; //   存储需要生成的tabs的title信息\n\n      this.tabTitle = paths.name; // 存储面包屑所需信息\n\n      let firstName = crumbs.name;\n      let lastName = crumbs.childs[0].name;\n      let lastPath = '/' + crumbs.childs[0].path;\n\n      for (let i = 0; i < this.sessionCrumbs.length; i++) {\n        if (crumbs.childs[0].name === this.sessionCrumbs[i].lastName) {\n          lastName = '';\n          break;\n        }\n      }\n\n      if (lastName === '') return;\n      this.sessionCrumbs.push({\n        firstName,\n        lastName,\n        lastPath\n      });\n    },\n\n    // 选中tabs事件\n    pitchTabs(pitch) {\n      this.addTabsValue = pitch.name;\n      this.activePath = pitch.name;\n      window.sessionStorage.setItem('activePath', pitch.name);\n      this.$router.push({\n        path: this.addTabsValue\n      });\n      let index = this.sessionCrumbs.findIndex(item => {\n        return item.lastName === pitch.label;\n      });\n\n      if (index > 0) {\n        this.crumbss.name = this.sessionCrumbs[index].firstName;\n        this.crumbss.childs.name = this.sessionCrumbs[index].lastName;\n      } else {\n        index = 0;\n        this.crumbss.name = this.sessionCrumbs[index].firstName;\n        this.crumbss.childs.name = this.sessionCrumbs[index].lastName;\n      }\n    },\n\n    // 移除tabs\n    removeTab(removes) {\n      if (removes === '/home' || removes === '/dashboardover') return;\n      let tabs = this.addTabs;\n      let activeName = this.addTabsValue; // 处理当前激活tab页移除事件\n\n      if (activeName === removes) {\n        tabs.forEach((tab, index) => {\n          if (tab.name === removes) {\n            let nextTab = tabs[index + 1] || tabs[index - 1];\n\n            if (nextTab) {\n              activeName = nextTab.name;\n            }\n          }\n        });\n      }\n\n      this.addTabsValue = activeName;\n      this.activePath = activeName; //   处理移除其他tab页面，使用filter方法返回符合条件的所有元素的新数组\n\n      this.addTabs = tabs.filter(tab => tab.name !== removes);\n      this.$router.push({\n        path: this.addTabsValue\n      });\n    },\n\n    // 退出登录\n    logout(command) {\n      if (command === 'out') window.sessionStorage.clear();\n      this.$router.push('/login');\n      this.$message.success('退出登录成功');\n    }\n\n  },\n  watch: {\n    $route(to, from) {\n      //设置一个变量flag，用来判断点击的menu对应的tab页面是否已打开\n      var flag = false; //遍历已打开tab的数组，判断点击的menu的tab是否已打开\n\n      for (let i = 0; i < this.addTabs.length; i++) {\n        if (to.path === this.addTabs[i].name) {\n          //如果发现点击的menu对应tab已打开，那么激活该tab\n          this.addTabsValue = this.addTabs[i].name; //将变量flag设为true\n\n          flag = true; //跳出\n\n          break;\n        }\n      } // !flag取反为true，执行if语句\n\n\n      if (!flag) {\n        let name = to.path;\n        let title = this.tabTitle; //将需要添加的tab信息push进tabs数组里\n\n        this.addTabs.push({\n          name,\n          title\n        }); //将点击的menu，对应的路由地址传给tabs\n\n        this.addTabsValue = name;\n      }\n\n      if (to.meta.index > from.meta.index) {\n        this.transitionName = 'slide-left';\n      } else {\n        this.transitionName = 'slide-right';\n      }\n    }\n\n  },\n\n  mounted() {\n    // 将已经打开tab页面信息存储到sessionStorage里\n    window.addEventListener('beforeunload', e => {\n      sessionStorage.setItem('addTabs', JSON.stringify({\n        addTabs: this.addTabs.filter(item => item.name != '/dashboardover'),\n        addTabsPath: this.addTabs.filter(item => item.name !== '/dashboardover'),\n        currActiveTabs: this.addTabsValue,\n        crumbs: this.sessionCrumbs\n      }));\n    });\n  }\n\n};","map":{"version":3,"mappings":"AAmGA;AACA;AACA;AACA;AACA;EACAA;IACA;MACAC,kBADA;MAEAC,aAFA;MAGAC,iBAHA;MAIAC;QACA,4BADA;QACA;QACA,oBAFA;QAEA;QACA,6BAHA;QAGA;QACA,8BAJA;QAIA;QACA,sBALA;QAKA;QACA,mBANA;QAMA;QACA,yBAPA;QAOA;QACA,6BARA;QAQA;QACA,wBATA;QASA;QACA,wBAVA;QAUA;QACA,kCAXA;QAWA;QACA,sBAZA;QAYA;QACA,qBAbA;QAaA;QACA,uBAdA;QAcA;QACA,uBAfA,CAeA;;MAfA,CAJA;MAqBAC,4BArBA;MAsBAC,8BAtBA;MAuBAC;QAAAC;QAAAC;MAAA,EAvBA;MAwBAC,YAxBA;MAyBAC;QACAH,UADA;QAEAI,qBAFA;QAGAC;MAHA,CAzBA;MA8BAC,gBACA;QAAAC;QAAAC;QAAAJ;MAAA,CADA;IA9BA;EAkCA,CApCA;;EAqCAK,YACA,yCADA;IAEA;EAFA,CArCA;;EAyCAC;IACA;IACA,8DAFA,CAGA;;IACA;;IACA;MACA;;MACA,IACAC,kCACAA,kCAFA,EAGA;QACA;UACA;YACAX,gCADA;YAEAC;UAFA;QAIA;;QACA;QACA;QACA;UAAAG;QAAA;MACA,CAbA,MAaA;QACA;MACA;IACA,CAvBA,CAwBA;;;IACA;MACA;IACA,CAFA,EAzBA,CA4BA;;IACA;MACA;MACA;IACA,CAHA,MAGA;MACAQ;MACA;MACA;IACA;EACA,CA9EA;;EA+EAC,WACA,gEADA;;IAEAC;MACA;MACA;MACA;MACA;MACA;MAEA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MAEA;MACA;MACAC;MACAA;;MAEA;QACA;QACA;MACA,CAHA;;MAIA;MACAA;IACA,CA7BA;;IA8BA;IACAC;MACA;IACA,CAjCA;;IAkCAC;MACA;MACAC;IACA,CArCA;;IAsCAC;MACAJ,2BADA,CAEA;;MACA,uCAHA,CAGA;;;MACA;MACA;;MACA;QACA;MACA,CARA,CASA;;;MACA;MACAG;MACA,6BAZA,CAaA;;MACA,2BAdA,CAeA;;MACA;MACA;MACA;;MACA;QACA;UACAV;UACA;QACA;MACA;;MACA;MAEA;QAAAD;QAAAC;QAAAY;MAAA;IACA,CAlEA;;IAmEA;IACAC;MACA;MACA;MACAH;MACA;QAAAd;MAAA;MAEA;QACA;MACA,CAFA;;MAGA;QACA;QACA;MACA,CAHA,MAGA;QACAQ;QACA;QACA;MACA;IACA,CArFA;;IAsFA;IACAU;MACA;MACA;MACA,mCAHA,CAIA;;MACA;QACAC;UACA;YACA;;YACA;cACAC;YACA;UACA;QACA,CAPA;MAQA;;MACA;MACA,6BAhBA,CAiBA;;MACA;MACA;QAAApB;MAAA;IACA,CA3GA;;IA4GA;IACAqB;MACA;MACA;MACA;IACA;;EAjHA,CA/EA;EAkMAC;IACAC;MACA;MACA,iBAFA,CAGA;;MACA;QACA;UACA;UACA,yCAFA,CAGA;;UACAC,YAJA,CAKA;;UACA;QACA;MACA,CAbA,CAcA;;;MACA;QACA;QACA,0BAFA,CAGA;;QACA;UAAA5B;UAAAC;QAAA,GAJA,CAKA;;QACA;MACA;;MAEA;QACA;MACA,CAFA,MAEA;QACA;MACA;IACA;;EA9BA,CAlMA;;EAkOA4B;IACA;IACAX;MACAY,uBACA,SADA,EAEAC;QACAhC,mEADA;QAEAiC,iCACAC,sCADA,CAFA;QAKAC,iCALA;QAMAC;MANA,EAFA;IAWA,CAZA;EAaA;;AAjPA","names":["data","transitionName","menuslist","isCollapse","elicon","activePath","addTabsValue","addTabs","name","title","tabTitle","crumbss","path","childs","sessionCrumbs","firstName","lastName","computed","created","sessionTab","index","methods","getMenusList","console","collapseOrSpread","saveDashboard","window","savePath","lastPath","pitchTabs","removeTab","tabs","activeName","logout","watch","$route","flag","mounted","sessionStorage","JSON","addTabsPath","item","currActiveTabs","crumbs"],"sourceRoot":"src/views/home","sources":["Home.vue"],"sourcesContent":["<template>\n  <el-container class=\"home-container\">\n    <el-aside :width=\"isCollapse ? '64px' : '160px'\">\n      <!-- <el-menu background-color=\"#333744\" text-color=\"#fff\" :collapse=\"isCollapse\" :unique-opened=\"true\" router :default-active=\"activePath\" :collapse-transition=\"false\">\n        <span class=\"logo-img\">\n          <img src=\"@/assets/logoB.png\" alt=\"\">\n          <h3 v-show=\"!isCollapse\">MINOR</h3>\n        </span> -->\n      <!-- 概览--二级 -->\n      <!-- <el-menu-item v-for=\"das in menuslist.filter((sub) => sub.path === 'dashboardover')\" :key=\"das.id\" :index=\"'/' + das.path\" class=\"dashboard\" router @click=\"saveDashboard(das)\">\n          <i :class=\"elicon[101]\"></i>\n          <span slot=\"title\">{{das.name}}</span>\n        </el-menu-item> -->\n      <!-- 一级菜单 -->\n      <!-- <el-submenu v-for=\"item in menuslist.filter((sub) => sub.path !== 'dashboardover')\" :key=\"item.id\" :index=\"item.id === '101' ? '/dashboardover' : item.id + ''\"> -->\n      <!-- 一级菜单模板区域 -->\n      <!-- <template slot=\"title\">\n            <i :class=\"elicon[item.id]\"></i>\n            <span slot=\"title\">{{item.name}}</span>\n          </template> -->\n\n      <!-- 二级菜单 -->\n      <!-- <el-menu-item :index=\"'/' + item1.path\" v-for=\"item1 in item.children\" :key=\"item1.id\" @click=\"savePath(item1,item)\">\n            <template slot=\"title\">\n              <i :class=\"elicon[item1.id]\"></i>\n              <span slot=\"title\">{{item1.name}}</span>\n            </template>\n          </el-menu-item>\n        </el-submenu>\n      </el-menu> -->\n\n      <el-menu background-color=\"#333744\" text-color=\"#fff\" :collapse=\"isCollapse\" :unique-opened=\"true\" router :default-active=\"activePath\" :collapse-transition=\"false\">\n        <span class=\"logo-img\">\n          <img src=\"@/assets/logoB.png\" alt=\"\">\n          <h3 v-show=\"!isCollapse\">MINOR</h3>\n        </span>\n        <!-- 概览--二级 -->\n        <el-menu-item v-for=\"das in menuslist.filter((sub) => sub.path === '/dashboardover')\" :key=\"das.id\" :index=\"das.path\" class=\"dashboard\" router @click=\"saveDashboard(das)\">\n          <i :class=\"das.icon\"></i>\n          <span slot=\"title\">{{das.name}}</span>\n        </el-menu-item>\n        <!-- 一级菜单 -->\n        <el-submenu v-for=\"item in menuslist.filter((sub) => sub.path !== '/dashboardover')\" :key=\"item.id\" :index=\"item.id === 1 ? '/dashboardover' : item.id + ''\">\n          <!-- 一级菜单模板区域 -->\n          <template slot=\"title\">\n            <i :class=\"item.icon\"></i>\n            <span slot=\"title\">{{item.name}}</span>\n          </template>\n\n          <!-- 二级菜单 -->\n          <el-menu-item :index=\"item1.path\" v-for=\"item1 in item.childs\" :key=\"item1.id\" @click=\"savePath(item1,item)\">\n            <template slot=\"title\">\n              <i :class=\"item1.icon\"></i>\n              <span slot=\"title\">{{item1.name}}</span>\n            </template>\n          </el-menu-item>\n        </el-submenu>\n      </el-menu>\n    </el-aside>\n    <el-container>\n      <!-- 头部区域 -->\n      <el-header class=\"headersty\">\n        <el-row>\n          <el-col :span=\"8\" class=\"header-left\">\n            <span :class=\"[isCollapse ? 'el-icon-s-unfold' : 'el-icon-s-fold', 'spreader']\" @click=\"collapseOrSpread\"></span>\n            <!-- 导航条-面包屑 -->\n            <el-breadcrumb separator=\"/\">\n              <el-breadcrumb-item>{{crumbss.name}}</el-breadcrumb-item>\n              <el-breadcrumb-item v-if=\"crumbss.children\">{{crumbss.children.name}}</el-breadcrumb-item>\n            </el-breadcrumb>\n          </el-col>\n          <el-col :span=\"8\" class=\"header-right\">\n            <el-dropdown size=\"small\" @command=\"logout\">\n              <span class=\"el-dropdown-link\">\n                <el-avatar shape=\"circle\" size=\"small\" src=\"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png\"></el-avatar>\n                <b>admin</b>\n              </span>\n              <el-dropdown-menu slot=\"dropdown\">\n                <el-dropdown-item icon=\"el-icon-switch-button\" command=\"out\">退出后台</el-dropdown-item>\n              </el-dropdown-menu>\n            </el-dropdown>\n          </el-col>\n        </el-row>\n\n      </el-header>\n      <!-- 主体内容区域 -->\n      <el-main>\n        <el-tabs v-model=\"addTabsValue\" type=\"card\" closable @tab-remove=\"removeTab\" @tab-click=\"pitchTabs\">\n          <el-tab-pane v-for=\"tabs in addTabs\" :key=\"tabs.name\" :label=\"tabs.title\" :name=\"tabs.name\">\n            <!-- <router-view></router-view> -->\n          </el-tab-pane>\n          <router-view></router-view>\n        </el-tabs>\n      </el-main>\n    </el-container>\n  </el-container>\n</template>\n\n<script>\nimport _ from 'lodash'\nimport axios from 'axios'\nimport api from '../../../api/index'\nimport { mapState, mapMutations, mapGetters } from 'vuex'\nexport default {\n  data() {\n    return {\n      transitionName: '',\n      menuslist: [],\n      isCollapse: false,\n      elicon: {\n        101: 'el-icon-data-analysis', //首页概览\n        112: 'el-icon-goods', //商品\n        113: 'el-icon-shopping-bag-2', //商品列表\n        123: 'el-icon-document-remove', //订单\n        124: 'el-icon-tickets', //订单列表\n        134: 'el-icon-user', //客户\n        135: 'el-icon-user-solid', //客户列表\n        136: 'el-icon-collection-tag', //客户标签\n        145: 'el-icon-data-line', //数据\n        146: 'el-icon-pie-chart', //数据概览\n        147: 'el-icon-c-scale-to-original', //客流分析\n        156: 'el-icon-setting', //设置\n        157: 'el-icon-s-home', //店铺信息\n        158: 'el-icon-s-custom', //账号权限\n        159: 'el-icon-document', //操作日志\n      },\n      activePath: '/dashboardover',\n      addTabsValue: '/dashboardover',\n      addTabs: [{ name: '/dashboardover', title: '概览' }],\n      tabTitle: '',\n      crumbss: {\n        name: '概览',\n        path: 'dashboardover',\n        childs: {},\n      },\n      sessionCrumbs: [\n        { firstName: '概览', lastName: '', path: '/dashboardover' },\n      ],\n    }\n  },\n  computed: {\n    ...mapState(['userId', 'menuRouterList']),\n    ...mapGetters(['getMenuRouter']),\n  },\n  created() {\n    this.getMenusList()\n    this.activePath = window.sessionStorage.getItem('activePath')\n    // 初始时从sessionStorage里取出刷新页面前已存储的展示的tab页信息\n    const sessionTab = JSON.parse(window.sessionStorage.getItem('addTabs'))\n    if (sessionTab) {\n      this.sessionCrumbs = sessionTab.crumbs\n      if (\n        sessionTab.addTabs.length != 0 &&\n        sessionTab.addTabsPath.length != 0\n      ) {\n        for (let i = 0; i < sessionTab.addTabs.length; i++) {\n          this.addTabs.push({\n            name: sessionTab.addTabs[i].name,\n            title: sessionTab.addTabs[i].title,\n          })\n        }\n        this.activePath = sessionTab.currActiveTabs\n        this.addTabsValue = sessionTab.currActiveTabs\n        this.$router.push({ path: this.addTabsValue })\n      } else {\n        this.activePath = sessionTab.currActiveTabs\n      }\n    }\n    // 取页面刷新前激活页path对应面包屑信息数组里path的元素下标\n    let index = this.sessionCrumbs.findIndex((item) => {\n      return this.addTabsValue === item.lastPath\n    })\n    // 将sessionStorage中保存的面包屑信息取出\n    if (index > 0) {\n      this.crumbss.name = this.sessionCrumbs[index].firstName\n      this.crumbss.childs.name = this.sessionCrumbs[index].lastName\n    } else {\n      index = 0\n      this.crumbss.name = this.sessionCrumbs[index].firstName\n      this.crumbss.childs.name = this.sessionCrumbs[index].lastName\n    }\n  },\n  methods: {\n    ...mapMutations(['getUserId', 'setRouter', 'getMenuRouterList']),\n    getMenusList() {\n      // const { data: res } = await this.$axios.get('menus')\n      // const { data: res } = await axios.get(`${api.defultUrl}/menus`)\n      // if (res.meta.status !== 200)\n      //   return this.$message.error('获取侧边菜单失败')\n      // this.menuslist = res.data\n\n      // this.getUserId()\n      // const { data: res } = await axios.get(`${api.localUrl}/menus`, {params: {userid: this.userId}})\n      // if (res.status !== 200)\n      //   return this.$message.error('获取菜单失败')\n      // this.menuslist = res.data\n      // this.setRouter(res.data) // 保存用户角色权限到vuex中\n      // console.log(this.menuRouterList)\n      // const res = this.getMenuRouter()\n\n      this.getMenuRouterList()\n      this.menuslist = this.menuRouterList\n      console.log('渲染路由', this.menuslist)\n      console.log('路由是', this.$router)\n\n      const loadView = (view) => {\n        // return () => Promise.resolve(require(`@/views/${view}`).default)\n        return () => import(`./views/${view}.vue`)\n      }\n      let aa = loadView('home/Home')\n      console.log('dada', aa)\n    },\n    // 展开或者折叠侧边栏\n    collapseOrSpread() {\n      this.isCollapse = !this.isCollapse\n    },\n    saveDashboard(das) {\n      this.addTabsValue = das.path\n      window.sessionStorage.setItem('activePath', this.addTabsValue)\n    },\n    savePath(paths, crumbs) {\n      console.log(paths, crumbs)\n      // 面包屑跟随改变\n      const crumbsInfo = _.cloneDeep(crumbs) // 深拷贝，避免后续修改操作影响menu\n      this.crumbss.name = crumbsInfo.name\n      this.crumbss.path = crumbsInfo.path\n      if (crumbsInfo.childs) {\n        this.crumbss.childs = crumbsInfo.childs[0]\n      }\n      // 将当前激活tab页的name(path地址)保存到sessionStorage里\n      this.addTabsValue = paths.path\n      window.sessionStorage.setItem('activePath', this.addTabsValue)\n      this.activePath = paths.path\n      //   存储需要生成的tabs的title信息\n      this.tabTitle = paths.name\n      // 存储面包屑所需信息\n      let firstName = crumbs.name\n      let lastName = crumbs.childs[0].name\n      let lastPath = '/' + crumbs.childs[0].path\n      for (let i = 0; i < this.sessionCrumbs.length; i++) {\n        if (crumbs.childs[0].name === this.sessionCrumbs[i].lastName) {\n          lastName = ''\n          break\n        }\n      }\n      if (lastName === '') return\n\n      this.sessionCrumbs.push({ firstName, lastName, lastPath })\n    },\n    // 选中tabs事件\n    pitchTabs(pitch) {\n      this.addTabsValue = pitch.name\n      this.activePath = pitch.name\n      window.sessionStorage.setItem('activePath', pitch.name)\n      this.$router.push({ path: this.addTabsValue })\n\n      let index = this.sessionCrumbs.findIndex((item) => {\n        return item.lastName === pitch.label\n      })\n      if (index > 0) {\n        this.crumbss.name = this.sessionCrumbs[index].firstName\n        this.crumbss.childs.name = this.sessionCrumbs[index].lastName\n      } else {\n        index = 0\n        this.crumbss.name = this.sessionCrumbs[index].firstName\n        this.crumbss.childs.name = this.sessionCrumbs[index].lastName\n      }\n    },\n    // 移除tabs\n    removeTab(removes) {\n      if (removes === '/home' || removes === '/dashboardover') return\n      let tabs = this.addTabs\n      let activeName = this.addTabsValue\n      // 处理当前激活tab页移除事件\n      if (activeName === removes) {\n        tabs.forEach((tab, index) => {\n          if (tab.name === removes) {\n            let nextTab = tabs[index + 1] || tabs[index - 1]\n            if (nextTab) {\n              activeName = nextTab.name\n            }\n          }\n        })\n      }\n      this.addTabsValue = activeName\n      this.activePath = activeName\n      //   处理移除其他tab页面，使用filter方法返回符合条件的所有元素的新数组\n      this.addTabs = tabs.filter((tab) => tab.name !== removes)\n      this.$router.push({ path: this.addTabsValue })\n    },\n    // 退出登录\n    logout(command) {\n      if (command === 'out') window.sessionStorage.clear()\n      this.$router.push('/login')\n      this.$message.success('退出登录成功')\n    },\n  },\n  watch: {\n    $route(to, from) {\n      //设置一个变量flag，用来判断点击的menu对应的tab页面是否已打开\n      var flag = false\n      //遍历已打开tab的数组，判断点击的menu的tab是否已打开\n      for (let i = 0; i < this.addTabs.length; i++) {\n        if (to.path === this.addTabs[i].name) {\n          //如果发现点击的menu对应tab已打开，那么激活该tab\n          this.addTabsValue = this.addTabs[i].name\n          //将变量flag设为true\n          flag = true\n          //跳出\n          break\n        }\n      }\n      // !flag取反为true，执行if语句\n      if (!flag) {\n        let name = to.path\n        let title = this.tabTitle\n        //将需要添加的tab信息push进tabs数组里\n        this.addTabs.push({ name, title })\n        //将点击的menu，对应的路由地址传给tabs\n        this.addTabsValue = name\n      }\n\n      if (to.meta.index > from.meta.index) {\n        this.transitionName = 'slide-left'\n      } else {\n        this.transitionName = 'slide-right'\n      }\n    },\n  },\n  mounted() {\n    // 将已经打开tab页面信息存储到sessionStorage里\n    window.addEventListener('beforeunload', (e) => {\n      sessionStorage.setItem(\n        'addTabs',\n        JSON.stringify({\n          addTabs: this.addTabs.filter((item) => item.name != '/dashboardover'),\n          addTabsPath: this.addTabs.filter(\n            (item) => item.name !== '/dashboardover'\n          ),\n          currActiveTabs: this.addTabsValue,\n          crumbs: this.sessionCrumbs,\n        })\n      )\n    })\n  },\n}\n</script>\n\n<style lang=\"less\" scoped>\n.home-container {\n  margin: 0;\n  padding: 0;\n  height: 100%;\n}\n.el-menu {\n  border-right: none;\n}\n.sidenav {\n  width: 100%;\n}\n::v-deep .el-submenu__title {\n  display: flex;\n  align-items: center;\n}\n.logo-img {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  img {\n    height: 40px;\n    margin: 0 4px 0 0;\n  }\n  h3 {\n    color: #eee;\n    font-size: 20px;\n    padding: 0;\n    margin: 0;\n    // height: 40px;\n  }\n}\n.dashboard {\n  display: flex;\n  align-items: center;\n  i {\n    transform: translateY(-2px);\n  }\n}\n.el-aside {\n  background-color: #323744;\n}\n.el-submenu [class^='el-icon-'] {\n  transform: translateY(-2px);\n}\n.el-header {\n  height: 50px !important;\n  border-bottom: 1px solid #eee;\n  padding: 0 10px;\n}\n.el-main {\n  padding: 2px 6px 2px 6px;\n  height: 100%;\n  width: 100%;\n  background: #fafafa;\n}\n.el-row {\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  .el-col {\n    display: flex;\n    align-items: center;\n    height: 100%;\n  }\n}\n.spreader {\n  height: 100%;\n  font-size: 18px;\n  display: flex;\n  align-items: center;\n  padding: 0 12px 0 2px;\n  cursor: pointer;\n}\n.el-breadcrumb {\n  line-height: normal;\n  display: flex;\n  align-items: center;\n}\n.el-row::after,\n.el-row::before {\n  content: none;\n}\n::v-deep .el-avatar--small {\n  width: 24px;\n  height: 24px;\n}\n.header-right {\n  justify-content: flex-end;\n  .el-dropdown-link {\n    display: flex;\n    align-items: center;\n    height: 49px;\n    span {\n      margin-right: 4px;\n    }\n    b {\n      font-size: 15px;\n    }\n  }\n}\n::v-deep .el-tabs__header {\n  margin: 0 0 5px;\n}\n::v-deep .el-tabs__nav {\n  height: 33px;\n  display: flex;\n  align-items: center;\n  margin-bottom: 3px;\n  border-bottom: 1px solid #e4e7ed !important;\n  border-radius: 4px !important;\n  background: #ffffff;\n  .is-active {\n    border-bottom-color: #e4e7ed !important;\n  }\n  .el-tabs__item {\n    font-size: 12px;\n    line-height: normal;\n    height: 33px;\n    display: flex;\n    align-items: center;\n  }\n}\n::v-deep .el-submenu .el-menu-item {\n  min-width: 160px;\n}\n</style>"]},"metadata":{},"sourceType":"module"}