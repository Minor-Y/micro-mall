{"ast":null,"code":"import _Message2 from \"element-ui/lib/theme-chalk/message.css\";\nimport \"element-ui/lib/theme-chalk/base.css\";\nimport _Message from \"element-ui/lib/message\";\nimport Vue from 'vue';\nimport VueRouter from 'vue-router';\nVue.use(VueRouter); // 解决ElementUI导航栏中的vue-router在3.0版本以上重复点菜单报错问题\n\nconst originalPush = VueRouter.prototype.push;\n\nVueRouter.prototype.push = function push(location) {\n  return originalPush.call(this, location).catch(err => err);\n};\n\nconst routes = [{\n  path: '/',\n  redirect: '/login'\n}, {\n  path: '/login',\n  name: 'login',\n  meta: {\n    index: 0\n  },\n  component: () => import(\n  /* webpackChunkName: \"login\" */\n  '../views/login/Login.vue')\n}, {\n  path: '/home',\n  name: 'home',\n  meta: {\n    index: 1\n  },\n  redirect: '/dashboardover',\n  component: () => import(\n  /* webpackChunkName: \"home\" */\n  '../views/home/Home.vue'),\n  children: [{\n    path: '/dashboardover',\n    name: 'dashboardover',\n    meta: {\n      index: 2\n    },\n    component: () => import(\n    /* webpackChunkName: \"dashboardover\" */\n    '../views/dashboardover/Dashboardover.vue')\n  }, {\n    path: '/goodslist',\n    name: 'goodslist',\n    meta: {\n      index: 3\n    },\n    component: () => import(\n    /* webpackChunkName: \"goods\" */\n    '../views/goods/GoodsList.vue')\n  }, {\n    path: '/orderlist',\n    name: 'orderlist',\n    meta: {\n      index: 4\n    },\n    component: () => import(\n    /* webpackChunkName: \"order\" */\n    '../views/order/OrderList.vue')\n  }, {\n    path: '/customerlist',\n    name: 'customerlist',\n    meta: {\n      index: 5\n    },\n    component: () => import(\n    /* webpackChunkName: \"customer\" */\n    '../views/customer/CustomerList.vue')\n  }]\n}];\nconst router = new VueRouter({\n  routes\n}); // 挂载路由守卫\n\nrouter.beforeEach((to, from, next) => {\n  if (to.path === '/login') return next(); // 获取token\n\n  let token = window.sessionStorage.getItem('token');\n  const tokenStart = window.sessionStorage.getItem('tokenStart');\n  const nowDate = new Date().getTime();\n  const timeOver = 60 * 1000;\n\n  if (nowDate - tokenStart > timeOver) {\n    token = null;\n  }\n\n  if (!token) {\n    _Message.error('登录状态过期，请重新登录');\n\n    window.sessionStorage.clear();\n    return next('/login');\n  } else if (to.path === '/login') {\n    return next('/dashboardover');\n  }\n\n  next();\n});\nexport default router;","map":{"version":3,"names":["Vue","VueRouter","use","originalPush","prototype","push","location","call","catch","err","routes","path","redirect","name","meta","index","component","children","router","beforeEach","to","from","next","token","window","sessionStorage","getItem","tokenStart","nowDate","Date","getTime","timeOver","error","clear"],"sources":["/Users/minor/Documents/micro_mall/src/router/index.js"],"sourcesContent":["import Vue from 'vue'\nimport VueRouter from 'vue-router'\nimport {Message} from 'element-ui'\n\nVue.use(VueRouter)\n\n// 解决ElementUI导航栏中的vue-router在3.0版本以上重复点菜单报错问题\nconst originalPush = VueRouter.prototype.push\nVueRouter.prototype.push = function push(location) {\n  return originalPush.call(this, location).catch(err => err)\n}\n\nconst routes = [\n  {\n    path: '/',\n    redirect: '/login'\n  },\n  {\n    path: '/login',\n    name: 'login',\n    meta: {index: 0},\n    component: () => import(/* webpackChunkName: \"login\" */ '../views/login/Login.vue')\n  },\n  {\n    path: '/home',\n    name: 'home',\n    meta: {index: 1},\n    redirect: '/dashboardover',\n    component: () => import(/* webpackChunkName: \"home\" */ '../views/home/Home.vue'),\n    children: [\n      {\n        path: '/dashboardover',\n        name: 'dashboardover',\n        meta: {index: 2},\n        component: () => import(/* webpackChunkName: \"dashboardover\" */ '../views/dashboardover/Dashboardover.vue'),\n      },\n      {\n        path: '/goodslist',\n        name: 'goodslist',\n        meta: {index: 3},\n        component: () => import(/* webpackChunkName: \"goods\" */ '../views/goods/GoodsList.vue'),\n      },\n      {\n        path: '/orderlist',\n        name: 'orderlist',\n        meta: {index: 4},\n        component: () => import(/* webpackChunkName: \"order\" */ '../views/order/OrderList.vue'),\n      },\n      {\n        path: '/customerlist',\n        name: 'customerlist',\n        meta: {index: 5},\n        component: () => import(/* webpackChunkName: \"customer\" */ '../views/customer/CustomerList.vue'),\n      },\n    ]\n  }\n]\n\n\nconst router = new VueRouter({\n  routes\n})\n\n// 挂载路由守卫\nrouter.beforeEach((to, from, next) => {\n  if(to.path === '/login') return next()\n  // 获取token\n  let token = window.sessionStorage.getItem('token')\n  const tokenStart = window.sessionStorage.getItem('tokenStart')\n  const nowDate = new Date().getTime()\n  const timeOver = 60 * 1000\n  if(nowDate - tokenStart > timeOver) {\n    token = null\n  }\n  if(!token) {\n    Message.error('登录状态过期，请重新登录')\n    window.sessionStorage.clear()\n    return next('/login')\n  } else if (to.path === '/login') {\n    return next('/dashboardover')\n  }\n  next()\n})\n\nexport default router\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}