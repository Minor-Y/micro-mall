{"ast":null,"code":"import api from '../../../api/index';\nexport default {\n  data() {\n    return {\n      pparams: {\n        location: '',\n        key: 'b039d29332b3477c84c6131e424510ec'\n      },\n      weatherIn: [],\n      isHour: '',\n      sportText: '',\n      notice: [{\n        title: '直播技术服务费\"限免公告\",请关注！！哈哈哈',\n        date: '7/01'\n      }, {\n        title: '社区团购多重升级,全力嘎嘎嘎支持抗疫',\n        date: '7/06'\n      }, {\n        title: '小程序链接生成与使用规则调整公告',\n        date: '7/21'\n      }, {\n        title: '6.18提效工具,免费使用6个月起~~',\n        date: '8/01'\n      }, {\n        title: '新增多人拼团功能,助力营销提升LO哦咯',\n        date: '8/05'\n      }, {\n        title: '新增多人拼团功能,助力营销提升desh达达',\n        date: '8/05'\n      }],\n      commonFun: [{\n        title: '商品',\n        icon: 'el-icon-goods',\n        color: '#2376B7'\n      }, {\n        title: '订单',\n        icon: 'el-icon-document-remove',\n        color: '#1BA784'\n      }, {\n        title: '客户',\n        icon: 'el-icon-user',\n        color: '#FFD111'\n      }, {\n        title: '数据',\n        icon: 'el-icon-data-line',\n        color: '#F86B1D'\n      }, {\n        title: '标签',\n        icon: 'el-icon-collection-tag',\n        color: '#1661AB'\n      }, {\n        title: '消息',\n        icon: 'el-icon-bell',\n        color: '#93B5CF'\n      }],\n      nowDate: '',\n      realDate: [{\n        title: '实收金额',\n        num: '2156',\n        icon: 'icon-weibiaoti-2-19'\n      }, {\n        title: '支付单数',\n        num: '23',\n        icon: 'icon-weibiaoti-2-14'\n      }, {\n        title: '浏览量',\n        num: '1234',\n        icon: 'icon-weibiaoti-2-21'\n      }, {\n        title: '新增客户数',\n        num: '36',\n        icon: 'icon-weibiaoti-2-05'\n      }, {\n        title: '支付人数',\n        num: '23',\n        icon: 'icon-weibiaoti-2-08'\n      } // {\n      //   title: '客单价',\n      //   num: '320',\n      //   icon: 'icon-weibiaoti-2-10',\n      // },\n      ],\n      loading: true\n    };\n  },\n\n  created() {},\n\n  methods: {\n    async getWeather() {\n      // 获取IP，再根据IP获取城市名称\n      const cityIp = await this.$axios.get('/ip/cityjson');\n      if (cityIp.status !== 200) return this.$message.error('获取IP地址失败'); // 分离并获取ip地址\n\n      let ip = cityIp.data.split('=')[1];\n      ip = JSON.parse(ip.split(';')[0]);\n      const cityName = await this.$axios.get('/api/ipJson.jsp', {\n        params: {\n          ip: ip,\n          json: true\n        }\n      });\n      if (cityName.status !== 200) return this.$$message.error('获取ip信息失败');\n      this.pparams.location = cityName.data.city.split('市')[0]; // 根据城市名称获取城市ID\n\n      const cityIds = await this.$axios.get(api.getLocationId, {\n        params: this.pparams\n      });\n      if (cityIds.status !== 200) return this.$message.error('获取城市id失败');\n      const cityId = cityIds.data.location.filter(item => {\n        return item.name === this.pparams.location;\n      }); // 获取城市天气信息\n\n      const weatherInfo = await this.$axios.get(api.getWeather, {\n        params: {\n          key: this.pparams.key,\n          location: cityId[0].id\n        }\n      });\n      if (weatherInfo.status !== 200) return this.$message.error('获取天气信息失败');\n      this.weatherIn = weatherInfo.data.now; //   判断当前时间\n\n      let hour = this.weatherIn.obsTime.substring(11, 13);\n\n      if (hour > 12) {\n        this.isHour = '下午好';\n      } else {\n        this.isHour = '上午好';\n      } // 获取生活运动指数\n\n\n      const sportIndex = await this.$axios.get(api.getWeatherIndex, {\n        params: {\n          key: this.pparams.key,\n          location: cityId[0].id,\n          type: 1\n        }\n      });\n      if (sportIndex.status !== 200) return this.$message.error('获取指数失败');\n      this.sportText = sportIndex.data.daily[0].text;\n      this.loading = false;\n    },\n\n    // 图表\n    showTend() {\n      let tendEchart = this.$echarts.init(this.$refs.chart);\n      tendEchart.setOption({\n        // tooltip用来控制是否显示提示框，以及坐标线\n        tooltip: {\n          trigger: 'axis',\n          // axis为轴线方式显示提示\n          axisPointer: {\n            type: 'cross',\n            lineStyle: {\n              // 设置线条样式为实线\n              width: 1,\n              type: 'solid'\n            }\n          }\n        },\n        grid: {\n          left: '5%',\n          right: '5%',\n          top: '14%',\n          bottom: '10%'\n        },\n        xAxis: {\n          type: 'category',\n          data: ['04:00', '08:00', '12:00', '16:00', '20:00', '24:00']\n        },\n        yAxis: {\n          type: 'value',\n          splitLine: {\n            show: true,\n            lineStyle: {\n              type: 'dashed'\n            }\n          }\n        },\n        series: [{\n          data: [602, 506, 650, 785, 690, 900],\n          name: '今日实收金额',\n          type: 'line',\n          smooth: true,\n          showSymbol: false,\n          lineStyle: {\n            color: '#326bee',\n            shadowOffsetX: 2,\n            shadowOffsetY: 6,\n            shadowBlur: 9,\n            shadowColor: '#aabff2'\n          }\n        }, {\n          data: [650, 400, 600, 700, 880, 750],\n          name: '昨日实收金额',\n          type: 'line',\n          smooth: true,\n          showSymbol: false,\n          lineStyle: {\n            color: '#5dd4a7',\n            shadowOffsetX: 2,\n            shadowOffsetY: 6,\n            shadowBlur: 9,\n            shadowColor: '#7cd7b5'\n          }\n        }]\n      });\n    }\n\n  },\n\n  mounted() {\n    this.showTend();\n    this.getWeather(); // 获取数据更新时间\n\n    const dates = new Date();\n    const year = dates.getFullYear().toString();\n    const mon = dates.getMonth().toString();\n    const day = dates.getDate().toString();\n    this.nowDate = `${year}-${mon.length === 1 ? mon.padStart(2, '0') : mon}-${day.length === 1 ? day.padStart(2, '0') : day}`;\n  }\n\n};","map":{"version":3,"mappings":"AA0EA;AACA;EACAA;IACA;MACAC;QACAC,YADA;QAEAC;MAFA,CADA;MAKAC,aALA;MAMAC,UANA;MAOAC,aAPA;MAQAC,SACA;QACAC,+BADA;QAEAC;MAFA,CADA,EAKA;QACAD,2BADA;QAEAC;MAFA,CALA,EASA;QACAD,yBADA;QAEAC;MAFA,CATA,EAaA;QACAD,4BADA;QAEAC;MAFA,CAbA,EAiBA;QACAD,4BADA;QAEAC;MAFA,CAjBA,EAqBA;QACAD,8BADA;QAEAC;MAFA,CArBA,CARA;MAkCAC,YACA;QACAF,WADA;QAEAG,qBAFA;QAGAC;MAHA,CADA,EAMA;QACAJ,WADA;QAEAG,+BAFA;QAGAC;MAHA,CANA,EAWA;QACAJ,WADA;QAEAG,oBAFA;QAGAC;MAHA,CAXA,EAgBA;QACAJ,WADA;QAEAG,yBAFA;QAGAC;MAHA,CAhBA,EAqBA;QACAJ,WADA;QAEAG,8BAFA;QAGAC;MAHA,CArBA,EA0BA;QACAJ,WADA;QAEAG,oBAFA;QAGAC;MAHA,CA1BA,CAlCA;MAkEAC,WAlEA;MAmEAC,WACA;QACAN,aADA;QAEAO,WAFA;QAGAJ;MAHA,CADA,EAMA;QACAH,aADA;QAEAO,SAFA;QAGAJ;MAHA,CANA,EAWA;QACAH,YADA;QAEAO,WAFA;QAGAJ;MAHA,CAXA,EAgBA;QACAH,cADA;QAEAO,SAFA;QAGAJ;MAHA,CAhBA,EAqBA;QACAH,aADA;QAEAO,SAFA;QAGAJ;MAHA,CArBA,CA0BA;MACA;MACA;MACA;MACA;MA9BA,CAnEA;MAmGAK;IAnGA;EAqGA,CAvGA;;EAwGAC,WAEA,CA1GA;;EA2GAC;IACA;MACA;MACA;MACA,kEAHA,CAIA;;MACA;MACAC;MACA;QACAC;UAAAD;UAAAE;QAAA;MADA;MAGA;MACA,yDAXA,CAYA;;MACA;QACAD;MADA;MAGA;MACA;QACA;MACA,CAFA,EAjBA,CAoBA;;MACA;QACAA;UAAAjB;UAAAD;QAAA;MADA;MAGA,gCACA;MACA,sCA1BA,CA2BA;;MACA;;MACA;QACA;MACA,CAFA,MAEA;QACA;MACA,CAjCA,CAkCA;;;MACA;QACAkB;UAAAjB;UAAAD;UAAAoB;QAAA;MADA;MAGA;MACA;MACA;IAEA,CA3CA;;IA4CA;IACAC;MACA;MACAC;QACA;QACAC;UACAC,eADA;UACA;UACAC;YACAL,aADA;YAEAM;cAAA;cACAC,QADA;cAEAP;YAFA;UAFA;QAFA,CAFA;QAYAQ;UACAC,UADA;UAEAC,WAFA;UAGAC,UAHA;UAIAC;QAJA,CAZA;QAmBAC;UACAb,gBADA;UAEAtB;QAFA,CAnBA;QAuBAoC;UACAd,aADA;UAEAe;YACAC,UADA;YAEAV;cACAN;YADA;UAFA;QAFA,CAvBA;QAgCAiB,SACA;UACAvC,oCADA;UAEAwC,cAFA;UAGAlB,YAHA;UAIAmB,YAJA;UAKAC,iBALA;UAMAd;YACAhB,gBADA;YAEA+B,gBAFA;YAGAC,gBAHA;YAIAC,aAJA;YAKAC;UALA;QANA,CADA,EAeA;UACA9C,oCADA;UAEAwC,cAFA;UAGAlB,YAHA;UAIAmB,YAJA;UAKAC,iBALA;UAMAd;YACAhB,gBADA;YAEA+B,gBAFA;YAGAC,gBAHA;YAIAC,aAJA;YAKAC;UALA;QANA,CAfA;MAhCA;IA+DA;;EA9GA,CA3GA;;EA2NAC;IACA;IACA,kBAFA,CAGA;;IACA;IACA;IACA;IACA;IACA,0BACAC,6CACA,mDAFA;EAGA;;AAtOA","names":["data","pparams","location","key","weatherIn","isHour","sportText","notice","title","date","commonFun","icon","color","nowDate","realDate","num","loading","created","methods","ip","params","json","type","showTend","tendEchart","tooltip","trigger","axisPointer","lineStyle","width","grid","left","right","top","bottom","xAxis","yAxis","splitLine","show","series","name","smooth","showSymbol","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","mounted","mon"],"sourceRoot":"src/views/dashboardover","sources":["Dashboardover.vue"],"sourcesContent":["<template>\n  <div>\n    <el-row>\n      <el-col class=\"dash-left\">\n        <!-- 欢迎和天气卡片 -->\n        \n        <el-card shadow=\"never\" class=\"dash-hello\">\n          <el-skeleton :loading=\"loading\" :rows=\"4\" animated />\n          <el-col class=\"dash-welcome\">\n            <span>{{isHour}},欢迎~</span>\n          </el-col>\n          <el-col class=\"dash-weather\">\n            <el-col class=\"dash-icon\">\n              <el-avatar shape=\"circle\" size=\"large\" src=\"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png\"></el-avatar>\n            </el-col>\n            <el-col class=\"dash-weather-info\">\n              <h1>开始您一天的工作吧！</h1>\n              <span>今日{{weatherIn.text}},{{sportText}}</span>\n            </el-col>\n          </el-col>\n        </el-card>\n        <!-- 常用功能 -->\n        <el-card class=\"common-fun\">\n          <ul>\n            <li v-for=\"(common, index) in commonFun\" :key=\"index\">\n              <p><i :class=\"common.icon\" :style=\"{color: common.color}\"></i></p>\n              <p>{{common.title}}</p>\n            </li>\n          </ul>\n        </el-card>\n      </el-col>\n      <el-col class=\"dash-right\">\n        <!-- 公告卡片 -->\n        <el-card shadow=\"never\" class=\"dash-notice\">\n          <el-col class=\"notice-title\">\n            公告\n            <a href=\"\">更多</a>\n          </el-col>\n          <el-col class=\"notice-content\">\n            <ul>\n              <li v-for=\"(item,index) in notice\" :key=\"index\">\n                <a href=\"\">{{item.title}}\n                  <span>{{item.date}}</span>\n                </a>\n              </li>\n            </ul>\n          </el-col>\n        </el-card>\n      </el-col>\n    </el-row>\n    <!-- 实时数据区域 -->\n    <el-card class=\"realdata\">\n      <span>实时数据<a>数据更新于:{{nowDate}}</a></span>\n      <ul>\n        <li v-for=\"(real,index) in realDate\" :key=\"index\">\n          <p>\n            <i :class=\"[real.icon, 'iconfont']\"></i>\n          </p>\n          <p class=\"realdata-right\">\n            <span class=\"realdata-num\">{{real.num}}</span>\n            <span>{{real.title}}</span>\n          </p>\n        </li>\n      </ul>\n    </el-card>\n    <!-- 数据曲线图 -->\n    <el-card class=\"tend-chart\">\n      <span>实收金额趋势图</span>\n      <div class=\"tend-map\" ref=\"chart\"></div>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport api from '../../../api/index'\nexport default {\n  data() {\n    return {\n      pparams: {\n        location: '',\n        key: 'b039d29332b3477c84c6131e424510ec',\n      },\n      weatherIn: [],\n      isHour: '',\n      sportText: '',\n      notice: [\n        {\n          title: '直播技术服务费\"限免公告\",请关注！！哈哈哈',\n          date: '7/01',\n        },\n        {\n          title: '社区团购多重升级,全力嘎嘎嘎支持抗疫',\n          date: '7/06',\n        },\n        {\n          title: '小程序链接生成与使用规则调整公告',\n          date: '7/21',\n        },\n        {\n          title: '6.18提效工具,免费使用6个月起~~',\n          date: '8/01',\n        },\n        {\n          title: '新增多人拼团功能,助力营销提升LO哦咯',\n          date: '8/05',\n        },\n        {\n          title: '新增多人拼团功能,助力营销提升desh达达',\n          date: '8/05',\n        },\n      ],\n      commonFun: [\n        {\n          title: '商品',\n          icon: 'el-icon-goods',\n          color: '#2376B7',\n        },\n        {\n          title: '订单',\n          icon: 'el-icon-document-remove',\n          color: '#1BA784',\n        },\n        {\n          title: '客户',\n          icon: 'el-icon-user',\n          color: '#FFD111',\n        },\n        {\n          title: '数据',\n          icon: 'el-icon-data-line',\n          color: '#F86B1D',\n        },\n        {\n          title: '标签',\n          icon: 'el-icon-collection-tag',\n          color: '#1661AB',\n        },\n        {\n          title: '消息',\n          icon: 'el-icon-bell',\n          color: '#93B5CF',\n        },\n      ],\n      nowDate: '',\n      realDate: [\n        {\n          title: '实收金额',\n          num: '2156',\n          icon: 'icon-weibiaoti-2-19',\n        },\n        {\n          title: '支付单数',\n          num: '23',\n          icon: 'icon-weibiaoti-2-14',\n        },\n        {\n          title: '浏览量',\n          num: '1234',\n          icon: 'icon-weibiaoti-2-21',\n        },\n        {\n          title: '新增客户数',\n          num: '36',\n          icon: 'icon-weibiaoti-2-05',\n        },\n        {\n          title: '支付人数',\n          num: '23',\n          icon: 'icon-weibiaoti-2-08',\n        },\n        // {\n        //   title: '客单价',\n        //   num: '320',\n        //   icon: 'icon-weibiaoti-2-10',\n        // },\n      ],\n      loading: true\n    }\n  },\n  created() {\n    \n  },\n  methods: {\n    async getWeather() {\n      // 获取IP，再根据IP获取城市名称\n      const cityIp = await this.$axios.get('/ip/cityjson')\n      if (cityIp.status !== 200) return this.$message.error('获取IP地址失败')\n      // 分离并获取ip地址\n      let ip = cityIp.data.split('=')[1]\n      ip = JSON.parse(ip.split(';')[0])\n      const cityName = await this.$axios.get('/api/ipJson.jsp', {\n        params: { ip: ip, json: true },\n      })\n      if (cityName.status !== 200) return this.$$message.error('获取ip信息失败')\n      this.pparams.location = cityName.data.city.split('市')[0]\n      // 根据城市名称获取城市ID\n      const cityIds = await this.$axios.get(api.getLocationId, {\n        params: this.pparams,\n      })\n      if (cityIds.status !== 200) return this.$message.error('获取城市id失败')\n      const cityId = cityIds.data.location.filter((item) => {\n        return item.name === this.pparams.location\n      })\n      // 获取城市天气信息\n      const weatherInfo = await this.$axios.get(api.getWeather, {\n        params: { key: this.pparams.key, location: cityId[0].id },\n      })\n      if (weatherInfo.status !== 200)\n        return this.$message.error('获取天气信息失败')\n      this.weatherIn = weatherInfo.data.now\n      //   判断当前时间\n      let hour = this.weatherIn.obsTime.substring(11, 13)\n      if (hour > 12) {\n        this.isHour = '下午好'\n      } else {\n        this.isHour = '上午好'\n      }\n      // 获取生活运动指数\n      const sportIndex = await this.$axios.get(api.getWeatherIndex, {\n        params: { key: this.pparams.key, location: cityId[0].id, type: 1 },\n      })\n      if (sportIndex.status !== 200) return this.$message.error('获取指数失败')\n      this.sportText = sportIndex.data.daily[0].text\n      this.loading = false\n      \n    },\n    // 图表\n    showTend() {\n      let tendEchart = this.$echarts.init(this.$refs.chart)\n      tendEchart.setOption({\n        // tooltip用来控制是否显示提示框，以及坐标线\n        tooltip: {\n          trigger: 'axis',  // axis为轴线方式显示提示\n          axisPointer: {\n            type: 'cross',\n            lineStyle: { // 设置线条样式为实线\n              width: 1,\n              type: 'solid',\n            },\n          },\n        },\n        grid: {\n            left: '5%',\n            right: '5%',\n            top: '14%',\n            bottom: '10%',\n\n        },\n        xAxis: {\n          type: 'category',\n          data: ['04:00', '08:00', '12:00', '16:00', '20:00', '24:00'],\n        },\n        yAxis: {\n          type: 'value',\n          splitLine: {\n            show: true,\n            lineStyle: {\n                type: 'dashed'\n            }\n          }\n        },\n        series: [\n          {\n            data: [602, 506, 650, 785, 690, 900],\n            name: '今日实收金额',\n            type: 'line',\n            smooth: true,\n            showSymbol: false,\n            lineStyle: {\n                color: '#326bee',\n                shadowOffsetX: 2,\n                shadowOffsetY: 6,\n                shadowBlur: 9,\n                shadowColor: '#aabff2'\n            }\n          },\n          {\n            data: [650, 400, 600, 700, 880, 750],\n            name: '昨日实收金额',\n            type: 'line',\n            smooth: true,\n            showSymbol: false,\n            lineStyle: {\n                color: '#5dd4a7',\n                shadowOffsetX: 2,\n                shadowOffsetY: 6,\n                shadowBlur: 9,\n                shadowColor: '#7cd7b5'\n            }\n          },\n        ],\n      })\n    },\n  },\n  mounted() {\n    this.showTend()\n    this.getWeather()\n    // 获取数据更新时间\n      const dates = new Date()\n      const year = dates.getFullYear().toString()\n      const mon = dates.getMonth().toString()\n      const day = dates.getDate().toString()\n      this.nowDate = `${year}-${\n        mon.length === 1 ? mon.padStart(2, '0') : mon\n      }-${day.length === 1 ? day.padStart(2, '0') : day}`\n  },\n}\n\n</script>\n\n<style lang=\"less\" scoped>\n// 设置10px字体大小\n.shrink() {\n  font-size: 10px;\n  -webkit-transform: scale(0.9);\n  display: inline-block;\n}\np {\n  margin: 0;\n}\n.el-row {\n  display: flex;\n  margin-top: 4px;\n}\n.el-card {\n  box-shadow: 0 0 4px 0 rgb(200 200 200 / 50%);\n  border: none;\n  margin: 0px 2px 12px 2px;\n}\n.dash-left {\n  flex: 1;\n  height: 100%;\n}\n.dash-right {\n  width: 280px;\n  height: 100%;\n  margin-left: 12px;\n  .dash-notice {\n    height: 250px;\n    // 公告头部\n    .notice-title {\n      font-size: 14px;\n      font-weight: 700;\n      margin-bottom: 14px;\n      a {\n        display: block;\n        float: right;\n        text-decoration: none;\n        color: #000;\n        opacity: 0.3;\n        font-size: 12px;\n      }\n    }\n  }\n  //   公告内容\n  .notice-content {\n    ul {\n      padding: 0;\n      margin: 0;\n      li {\n        list-style-type: none;\n        height: 33px;\n      }\n    }\n    a {\n      position: relative;\n      display: block;\n      text-decoration: none;\n      font-size: 12px;\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      color: #000;\n      opacity: 0.7;\n      padding-right: 40px;\n      span {\n        position: absolute;\n        right: 0;\n        font-weight: 500;\n      }\n    }\n  }\n}\n.dash-hello {\n  height: 152px;\n  .dash-welcome {\n    font-size: 16px;\n    font-weight: 700;\n    margin-bottom: 18px;\n  }\n  .dash-weather {\n    display: flex;\n    align-items: center;\n    .dash-icon {\n      width: 76px;\n      height: 76px;\n      margin-right: 14px;\n    }\n    .el-avatar {\n      width: 100%;\n      height: 100%;\n    }\n    .dash-weather-info {\n      h1 {\n        margin: 0 0 10px 0;\n      }\n      span {\n        font-size: 14px;\n      }\n    }\n  }\n}\n\n::v-deep .el-card__body {\n  padding: 15px;\n  height: 100%;\n  box-sizing: border-box;\n  text-align: left;\n}\n// 常用功能\n.common-fun {\n  height: 86px;\n  ul {\n    margin: 4px 0 0 0;\n    padding: 0;\n    display: flex;\n    justify-content: space-between;\n    li {\n      list-style-type: none;\n      text-align: center;\n      width: 100px;\n      cursor: pointer;\n      p {\n        margin: 0 0 4px 0;\n        font-size: 14px;\n        i {\n          font-size: 24px;\n        }\n      }\n    }\n  }\n}\n// 实时数据\n.realdata {\n  height: 160px;\n  span {\n    font-size: 14px;\n    a {\n      .shrink();\n      color: #000;\n      opacity: 0.6;\n    }\n  }\n  ul {\n    display: flex;\n    justify-content: space-between;\n    padding: 0 12px 0 12px;\n    margin: 24px 0 10px 0;\n    li {\n      display: flex;\n      align-items: center;\n      list-style-type: none;\n      //   margin: 0 12px;\n      .realdata-right {\n        margin-left: 4px;\n      }\n      i {\n        font-size: 74px;\n      }\n      .realdata-num {\n        display: flex;\n        flex-direction: column;\n        margin-bottom: 6px;\n        font-size: 20px;\n        font-weight: 700;\n      }\n    }\n  }\n}\n.tend-chart {\n  height: 430px;\n  span {\n    font-size: 14px;\n  }\n  .tend-map {\n    height: 370px;\n  }\n}\n</style>"]},"metadata":{},"sourceType":"module"}