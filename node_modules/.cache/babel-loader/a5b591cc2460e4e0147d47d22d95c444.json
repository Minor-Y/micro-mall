{"ast":null,"code":"import api from '../../../api/index';\nexport default {\n  data() {\n    return {\n      orderQuery: {\n        query: '',\n        pagenum: 1,\n        pagesize: 10,\n        value: ''\n      },\n      orderList: [],\n      options: [{\n        value: 'name',\n        label: '姓名'\n      }, {\n        value: 'orderNum',\n        label: '订单号'\n      }],\n      value: '',\n      total: 0\n    };\n  },\n\n  created() {\n    this.getOrderList();\n  },\n\n  methods: {\n    async getOrderList() {\n      const {\n        data: res\n      } = await this.$axios.get(`${api.localUrl}/order`, {\n        params: this.orderQuery\n      });\n      console.log(res);\n      if (res.status !== 200) return this.$message.error('获取订单列表失败，请刷新重试');\n      this.orderList = res.data;\n      this.total = res.total;\n      console.log(this.orderQuery.query);\n    },\n\n    handleSizeChange(size) {\n      this.orderQuery.pagesize = size;\n      this.getOrderList();\n    },\n\n    handleCurrentChange(curr) {\n      this.orderQuery.pagenum = curr;\n      this.getOrderList();\n    },\n\n    getType(val) {\n      console.log(val);\n      this.orderQuery.value = val;\n    }\n\n  }\n};","map":{"version":3,"mappings":"AA8BA;AACA;EACAA;IACA;MACAC;QACAC,SADA;QAEAC,UAFA;QAGAC,YAHA;QAIAC;MAJA,CADA;MAOAC,aAPA;MAQAC,UACA;QACAF,aADA;QAEAG;MAFA,CADA,EAKA;QACAH,iBADA;QAEAG;MAFA,CALA,CARA;MAkBAH,SAlBA;MAmBAI;IAnBA;EAqBA,CAvBA;;EAwBAC;IACA;EACA,CA1BA;;EA2BAC;IACA;MACA;QAAAX;MAAA;QACAY;MADA;MAGAC;MACA,wBACA;MACA;MACA;MACAA;IACA,CAXA;;IAYAC;MACA;MACA;IACA,CAfA;;IAgBAC;MACA;MACA;IACA,CAnBA;;IAoBAC;MACAH;MACA;IACA;;EAvBA;AA3BA","names":["data","orderQuery","query","pagenum","pagesize","value","orderList","options","label","total","created","methods","params","console","handleSizeChange","handleCurrentChange","getType"],"sourceRoot":"src/views/order","sources":["OrderList.vue"],"sourcesContent":["<template>\n  <div>\n    <el-card>\n      <div class=\"order-top\">\n        <el-select v-model=\"value\" placeholder=\"请选择\" size=\"small\" @change=\"getType\">\n          <el-option v-for=\"item in options\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\">\n          </el-option>\n        </el-select>\n        <el-input placeholder=\"请输入搜索关键词\" v-model=\"orderQuery.query\" size=\"small\" clearable @clear=\"getOrderList\">\n          <el-button slot=\"append\" icon=\"el-icon-search\" @click=\"getOrderList\">搜索</el-button>\n        </el-input>\n      </div>\n      <!-- table区域 -->\n      <el-table :data=\"orderList\" stripe>\n        <el-table-column prop=\"goodsName\" label=\"商品名称\"></el-table-column>\n        <el-table-column prop=\"orderNum\" label=\"订单号\" width=\"240\"></el-table-column>\n        <el-table-column prop=\"price\" label=\"售价\"></el-table-column>\n        <el-table-column prop=\"count\" label=\"数量\"></el-table-column>\n        <el-table-column prop=\"memberName\" label=\"客户姓名\"></el-table-column>\n        <el-table-column prop=\"amount\" label=\"支付金额\"></el-table-column>\n      </el-table>\n      <!-- 分页 -->\n      <el-pagination background @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\" \n      :current-page=\"orderQuery.pagenum\" :page-sizes=\"[10, 20, 30, 40, 60]\" :page-size=\"orderQuery.pagesize\" layout=\"total, sizes, prev, pager, next, jumper\" :total=\"total\">\n      </el-pagination>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport api from '../../../api/index'\nexport default {\n  data() {\n    return {\n      orderQuery: {\n        query: '',\n        pagenum: 1,\n        pagesize: 10,\n        value: ''\n      },\n      orderList: [],\n      options: [\n        {\n          value: 'name',\n          label: '姓名',\n        },\n        {\n          value: 'orderNum',\n          label: '订单号',\n        },\n      ],\n      value: '',\n      total: 0,\n    }\n  },\n  created() {\n    this.getOrderList()\n  },\n  methods: {\n    async getOrderList() {\n      const {data: res} = await this.$axios.get(`${api.localUrl}/order`, {\n        params: this.orderQuery\n      })\n      console.log(res)\n      if (res.status !== 200)\n        return this.$message.error('获取订单列表失败，请刷新重试')\n      this.orderList = res.data\n      this.total = res.total\n      console.log(this.orderQuery.query)\n    },\n    handleSizeChange(size) {\n        this.orderQuery.pagesize = size\n        this.getOrderList()\n    },\n    handleCurrentChange(curr) {\n        this.orderQuery.pagenum = curr\n        this.getOrderList()\n    },\n    getType(val) {\n        console.log(val)\n        this.orderQuery.value = val\n    }\n  },\n}\n</script>\n\n<style lang=\"less\" scoped>\n.order-top {\n  display: flex;\n  justify-content: flex-start;\n  margin-bottom: 18px;\n  .el-select {\n    width: 120px;\n    margin-right: 8px;\n  }\n  .el-input {\n    width: 340px;\n  }\n}\n.el-pagination {\n  margin-top: 16px;\n  display: flex;\n  justify-content: flex-start;\n}\n</style>"]},"metadata":{},"sourceType":"module"}